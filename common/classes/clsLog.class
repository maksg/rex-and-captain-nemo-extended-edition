OBJECT=VARILENGTH
VARILENGTH:TYPE=INTEGER
VARILENGTH:VALUE=21

OBJECT=VARBVISIBLE
VARBVISIBLE:TYPE=BOOL

OBJECT=VARSCOLORSELECTOR
VARSCOLORSELECTOR:TYPE=STRING
VARSCOLORSELECTOR:ONBRUTALCHANGED^RED={TXTMSG^SETCOLOR(255,0,0);}
VARSCOLORSELECTOR:ONBRUTALCHANGED^GREEN={TXTMSG^SETCOLOR(0,255,0);}
VARSCOLORSELECTOR:ONBRUTALCHANGED^BLUE={TXTMSG^SETCOLOR(0,0,255);}
VARSCOLORSELECTOR:ONBRUTALCHANGED^BLACK={TXTMSG^SETCOLOR(0,0,0);}
VARSCOLORSELECTOR:ONBRUTALCHANGED^WHITE={TXTMSG^SETCOLOR(255,255,255);}
VARSCOLORSELECTOR:ONBRUTALCHANGED^CYAN={TXTMSG^SETCOLOR(0,255,255);}

OBJECT=VARSMSG
VARSMSG:TYPE=STRING

OBJECT=VARSTMP1
VARSTMP1:TYPE=STRING

OBJECT=VARSTMP2
VARSTMP2:TYPE=STRING

OBJECT=VARICNT
VARICNT:TYPE=INTEGER

OBJECT=BLOGON
BLOGON:TYPE=BOOL

OBJECT=TXTMSG
TXTMSG:TYPE=TEXT
TXTMSG:VISIBLE=TRUE
TXTMSG:HYPERTEXT=
TXTMSG:FONT=ARIAL14
TXTMSG:TOCANVAS=TRUE
TXTMSG:RECT=0,0,800,600
TXTMSG:PRIORITY=10000
TXTMSG:HJUSTIFY=RIGHT
TXTMSG:VJUSTIFY=TOP
TXTMSG:MONITORCOLLISION=FALSE
TXTMSG:MONITORCOLLISIONALPHA=FALSE

OBJECT=ARIAL14
ARIAL14:TYPE=FONT
ARIAL14:DEF_ARIAL_STANDARD_14=$COMMON\ARIAL14.FNT

OBJECT=ARRMSG
ARRMSG:TYPE=ARRAY

OBJECT=CONSTRUCTOR
CONSTRUCTOR:TYPE=BEHAVIOUR
CONSTRUCTOR:CODE={@IF("$2","_","FALSE","BFITMP0","BFITMP1");}


OBJECT=PUT
PUT:TYPE=BEHAVIOUR
PUT:CODE={VARSTMP1^SET($1);@IF("BLOGON","_","TRUE","BFITMP3","");}


OBJECT=SHOW
SHOW:TYPE=BEHAVIOUR
SHOW:CODE={TXTMSG^SHOW();VARBVISIBLE^SET(TRUE);}


OBJECT=HIDE
HIDE:TYPE=BEHAVIOUR
HIDE:CODE={TXTMSG^HIDE();VARBVISIBLE^SET(FALSE);}


OBJECT=PRINT
PRINT:TYPE=BEHAVIOUR
PRINT:CODE={VARSMSG^SET("");@LOOP("{VARSMSG^ADD([""+ARRMSG^GET(_I_)+"|"]);}",0,ARRMSG^GETSIZE(),1);TXTMSG^SETTEXT([""+VARSMSG]);VARICNT^INC();}


OBJECT=SETCOLOR
SETCOLOR:TYPE=BEHAVIOUR
SETCOLOR:CODE={VARSCOLORSELECTOR^SET($1);PRINT^RUN();}


OBJECT=TOGGLE
TOGGLE:TYPE=BEHAVIOUR
TOGGLE:CODE={@IF("VARBVISIBLE","_","TRUE","BFITMP4","BFITMP5");}


OBJECT=CLEAR
CLEAR:TYPE=BEHAVIOUR
CLEAR:CODE={}


OBJECT=MOUSETOGGLE
MOUSETOGGLE:TYPE=BEHAVIOUR
MOUSETOGGLE:CODE={@IF("MOUSE^GETPOSX()<20&&MOUSE^GETPOSY()<20","BFITMP6","");@IF("MOUSE^GETPOSX()<20&&MOUSE^GETPOSY()>580","BFITMP7","");@IF("MOUSE^GETPOSX()>780&&MOUSE^GETPOSY()<20","BFITMP8","");@IF("MOUSE^GETPOSX()>780&&MOUSE^GETPOSY()>580","BFITMP9","");}


OBJECT=MOUSECLEAR
MOUSECLEAR:TYPE=BEHAVIOUR
MOUSECLEAR:CODE={@IF("MOUSE^GETPOSX()<20&&MOUSE^GETPOSY()<20","BFITMP10","");@IF("MOUSE^GETPOSX()<20&&MOUSE^GETPOSY()>580","BFITMP11","");@IF("MOUSE^GETPOSX()>780&&MOUSE^GETPOSY()<20","BFITMP12","");@IF("MOUSE^GETPOSX()>780&&MOUSE^GETPOSY()>580","BFITMP13","");}


OBJECT=SETJUSTIFY
SETJUSTIFY:TYPE=BEHAVIOUR
SETJUSTIFY:CODE={@STRING("SPARAM",$1);@STRING("SHALIGN","");@STRING("SVALIGN","");@IF(SPARAM^FIND("LEFT"),">","-1","BFITMP15","BFITMP16");@IF(SPARAM^FIND("TOP"),">","-1","BFITMP18","BFITMP19");TXTMSG^SETJUSTIFY(0,0,800,600,SHALIGN,SVALIGN);}


OBJECT=BFITMP0
BFITMP0:TYPE=BEHAVIOUR
BFITMP0:CODE={BLOGON^SET(FALSE);}


OBJECT=BFITMP1
BFITMP1:TYPE=BEHAVIOUR
BFITMP1:CODE={BLOGON^SET(TRUE);ARRMSG^REMOVEALL();VARBVISIBLE^SET(TRUE);VARICNT^SET(0);SETCOLOR^RUN("WHITE");SETJUSTIFY^RUN("LEFTBOTTOM");PRINT^RUN();VARICNT^SET(0);}


OBJECT=BFITMP2
BFITMP2:TYPE=BEHAVIOUR
BFITMP2:CODE={ARRMSG^REMOVEAT(0);}


OBJECT=BFITMP3
BFITMP3:TYPE=BEHAVIOUR
BFITMP3:CODE={VARSTMP2^SET([""+VARICNT+"___"+VARSTMP1]);ARRMSG^ADD(VARSTMP2);@IF(ARRMSG^GETSIZE(),">","VARILENGTH","BFITMP2","");PRINT^RUN();}


OBJECT=BFITMP4
BFITMP4:TYPE=BEHAVIOUR
BFITMP4:CODE={HIDE^RUN();}


OBJECT=BFITMP5
BFITMP5:TYPE=BEHAVIOUR
BFITMP5:CODE={SHOW^RUN();}


OBJECT=BFITMP6
BFITMP6:TYPE=BEHAVIOUR
BFITMP6:CODE={TOGGLE^RUN();SETJUSTIFY^RUN("TOPLEFT");}


OBJECT=BFITMP7
BFITMP7:TYPE=BEHAVIOUR
BFITMP7:CODE={TOGGLE^RUN();SETJUSTIFY^RUN("BOTTOMLEFT");}


OBJECT=BFITMP8
BFITMP8:TYPE=BEHAVIOUR
BFITMP8:CODE={TOGGLE^RUN();SETJUSTIFY^RUN("TOPRIGHT");}


OBJECT=BFITMP9
BFITMP9:TYPE=BEHAVIOUR
BFITMP9:CODE={TOGGLE^RUN();SETJUSTIFY^RUN("BOTTOMRIGHT");}


OBJECT=BFITMP10
BFITMP10:TYPE=BEHAVIOUR
BFITMP10:CODE={CLEAR^RUN();}


OBJECT=BFITMP11
BFITMP11:TYPE=BEHAVIOUR
BFITMP11:CODE={CLEAR^RUN();}


OBJECT=BFITMP12
BFITMP12:TYPE=BEHAVIOUR
BFITMP12:CODE={CLEAR^RUN();}


OBJECT=BFITMP13
BFITMP13:TYPE=BEHAVIOUR
BFITMP13:CODE={CLEAR^RUN();}


OBJECT=BFITMP14
BFITMP14:TYPE=BEHAVIOUR
BFITMP14:CODE={SHALIGN^SET("RIGHT");}


OBJECT=BFITMP15
BFITMP15:TYPE=BEHAVIOUR
BFITMP15:CODE={SHALIGN^SET("LEFT");}


OBJECT=BFITMP16
BFITMP16:TYPE=BEHAVIOUR
BFITMP16:CODE={@IF(SPARAM^FIND("RIGHT"),">","-1","BFITMP14","");}


OBJECT=BFITMP17
BFITMP17:TYPE=BEHAVIOUR
BFITMP17:CODE={SVALIGN^SET("BOTTOM");}


OBJECT=BFITMP18
BFITMP18:TYPE=BEHAVIOUR
BFITMP18:CODE={SVALIGN^SET("TOP");}


OBJECT=BFITMP19
BFITMP19:TYPE=BEHAVIOUR
BFITMP19:CODE={@IF(SPARAM^FIND("BOTTOM"),">","-1","BFITMP17","");}


