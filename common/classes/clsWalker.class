OBJECT=D1
D1:TYPE=DOUBLE
D1:VALUE=0.0

OBJECT=D2
D2:TYPE=DOUBLE
D2:VALUE=0.0

OBJECT=D3
D3:TYPE=DOUBLE
D3:VALUE=0.0

OBJECT=D4
D4:TYPE=DOUBLE
D4:VALUE=0.0

OBJECT=I1
I1:TYPE=INTEGER

OBJECT=I2
I2:TYPE=INTEGER

OBJECT=I3
I3:TYPE=INTEGER

OBJECT=I4
I4:TYPE=INTEGER

OBJECT=S1
S1:TYPE=STRING

OBJECT=__________
__________:TYPE=INTEGER

OBJECT=BLOCKWALKER
BLOCKWALKER:TYPE=BOOL
BLOCKWALKER:VALUE=FALSE

OBJECT=BRETSIGNAL
BRETSIGNAL:TYPE=BOOL
BRETSIGNAL:VALUE=TRUE

OBJECT=SCLASSNAME
SCLASSNAME:TYPE=STRING

OBJECT=ISIZEX
ISIZEX:TYPE=INTEGER
ISIZEX:VALUE=0

OBJECT=ISIZEY
ISIZEY:TYPE=INTEGER
ISIZEY:VALUE=0

OBJECT=IGRID
IGRID:TYPE=INTEGER
IGRID:VALUE=0

OBJECT=IGRIDOFFSET
IGRIDOFFSET:TYPE=INTEGER
IGRIDOFFSET:VALUE=0

OBJECT=SPATHFILENAME
SPATHFILENAME:TYPE=STRING

OBJECT=__________
__________:TYPE=INTEGER

OBJECT=ICREATUREPOSX
ICREATUREPOSX:TYPE=INTEGER
ICREATUREPOSX:VALUE=0

OBJECT=ICREATUREPOSY
ICREATUREPOSY:TYPE=INTEGER
ICREATUREPOSY:VALUE=0

OBJECT=ICREATURETARGETX
ICREATURETARGETX:TYPE=INTEGER
ICREATURETARGETX:VALUE=0

OBJECT=ICREATURETARGETY
ICREATURETARGETY:TYPE=INTEGER
ICREATURETARGETY:VALUE=0

OBJECT=IMOUSETARGETX
IMOUSETARGETX:TYPE=INTEGER
IMOUSETARGETX:VALUE=0

OBJECT=IMOUSETARGETY
IMOUSETARGETY:TYPE=INTEGER
IMOUSETARGETY:VALUE=0

OBJECT=__________
__________:TYPE=INTEGER

OBJECT=DTOLERANCJA
DTOLERANCJA:TYPE=DOUBLE
DTOLERANCJA:VALUE=0.0

OBJECT=DSASIADMIN
DSASIADMIN:TYPE=DOUBLE

OBJECT=DODLEGLOSCODB
DODLEGLOSCODB:TYPE=DOUBLE

OBJECT=DODLEGLOSCODBMIN
DODLEGLOSCODBMIN:TYPE=DOUBLE

OBJECT=IODWMARKER
IODWMARKER:TYPE=INTEGER
IODWMARKER:VALUE=1

OBJECT=IKROKLEN
IKROKLEN:TYPE=INTEGER
IKROKLEN:VALUE=1

OBJECT=IKOMORKA
IKOMORKA:TYPE=INTEGER

OBJECT=IKOMORKAX
IKOMORKAX:TYPE=INTEGER

OBJECT=IKOMORKAY
IKOMORKAY:TYPE=INTEGER

OBJECT=IKOMORKANEW
IKOMORKANEW:TYPE=INTEGER

OBJECT=IKOMORKAOLD
IKOMORKAOLD:TYPE=INTEGER

OBJECT=IKOMORKALASTX
IKOMORKALASTX:TYPE=INTEGER

OBJECT=IKOMORKALASTY
IKOMORKALASTY:TYPE=INTEGER

OBJECT=IKOMORKACLOSEST
IKOMORKACLOSEST:TYPE=INTEGER

OBJECT=ISASIADX
ISASIADX:TYPE=INTEGER

OBJECT=ISASIADY
ISASIADY:TYPE=INTEGER

OBJECT=ISASIADK
ISASIADK:TYPE=INTEGER
ISASIADK:VALUE=-1

OBJECT=ISASIADMIN
ISASIADMIN:TYPE=INTEGER
ISASIADMIN:VALUE=-1

OBJECT=ITARGETREACHED
ITARGETREACHED:TYPE=INTEGER
ITARGETREACHED:VALUE=-1

OBJECT=__________
__________:TYPE=INTEGER

OBJECT=BNEWTARGET
BNEWTARGET:TYPE=BOOL
BNEWTARGET:VALUE=FALSE

OBJECT=BCREATUREISWALKING
BCREATUREISWALKING:TYPE=BOOL
BCREATUREISWALKING:VALUE=FALSE
BCREATUREISWALKING:ONCHANGED^TRUE={SFX_WALK^PLAY();}
BCREATUREISWALKING:ONCHANGED^FALSE={SFX_WALK^STOP(FALSE);}

OBJECT=DCREATURESPEED
DCREATURESPEED:TYPE=DOUBLE
DCREATURESPEED:VALUE=1.0

OBJECT=DCREATURESPEEDADD
DCREATURESPEEDADD:TYPE=DOUBLE
DCREATURESPEEDADD:VALUE=1.0

OBJECT=DCREATUREWENTSOFARX
DCREATUREWENTSOFARX:TYPE=DOUBLE
DCREATUREWENTSOFARX:VALUE=0.0

OBJECT=DCREATUREWENTSOFARY
DCREATUREWENTSOFARY:TYPE=DOUBLE
DCREATUREWENTSOFARY:VALUE=0.0

OBJECT=ICREATUREDIRX
ICREATUREDIRX:TYPE=INTEGER
ICREATUREDIRX:VALUE=0

OBJECT=ICREATUREDIRY
ICREATUREDIRY:TYPE=INTEGER
ICREATUREDIRY:VALUE=0

OBJECT=ICREATUREDELTATOGOX
ICREATUREDELTATOGOX:TYPE=INTEGER
ICREATUREDELTATOGOX:VALUE=0

OBJECT=ICREATUREDELTATOGOY
ICREATUREDELTATOGOY:TYPE=INTEGER
ICREATUREDELTATOGOY:VALUE=0

OBJECT=ICREATUREMOVEX
ICREATUREMOVEX:TYPE=INTEGER
ICREATUREMOVEX:VALUE=0

OBJECT=ICREATUREMOVEY
ICREATUREMOVEY:TYPE=INTEGER
ICREATUREMOVEY:VALUE=0

OBJECT=ICREATUREPRIORITY
ICREATUREPRIORITY:TYPE=INTEGER
ICREATUREPRIORITY:VALUE=0
ICREATUREPRIORITY:ONCHANGED={ANNCREATURE^SETPRIORITY([ICREATUREPRIORITY+400]);}

OBJECT=IDIR
IDIR:TYPE=INTEGER
IDIR:VALUE=-1

OBJECT=IDIRSEL
IDIRSEL:TYPE=INTEGER
IDIRSEL:VALUE=-1
IDIRSEL:ONCHANGED^-1={ICREATUREDIRX^SET(0);ICREATUREDIRY^SET(0);}
IDIRSEL:ONCHANGED^0={ICREATUREDIRX^SET(-1);ICREATUREDIRY^SET(-1);DCREATURESPEEDADD^SET([DCREATURESPEED*1.41]);ANNCREATURE^PLAY([""+IDIRSEL]);}
IDIRSEL:ONCHANGED^1={ICREATUREDIRX^SET(0);ICREATUREDIRY^SET(-1);DCREATURESPEEDADD^SET(DCREATURESPEED);ANNCREATURE^PLAY([""+IDIRSEL]);}
IDIRSEL:ONCHANGED^2={ICREATUREDIRX^SET(1);ICREATUREDIRY^SET(-1);DCREATURESPEEDADD^SET([DCREATURESPEED*1.41]);ANNCREATURE^PLAY([""+IDIRSEL]);}
IDIRSEL:ONCHANGED^3={ICREATUREDIRX^SET(-1);ICREATUREDIRY^SET(0);DCREATURESPEEDADD^SET(DCREATURESPEED);ANNCREATURE^PLAY([""+IDIRSEL]);}
IDIRSEL:ONCHANGED^4={ICREATUREDIRX^SET(0);ICREATUREDIRY^SET(0);DCREATURESPEEDADD^SET(0.0);ANNCREATURE^PLAY(["IDLE_"+IDIRSEL]);}
IDIRSEL:ONCHANGED^5={ICREATUREDIRX^SET(1);ICREATUREDIRY^SET(0);DCREATURESPEEDADD^SET(DCREATURESPEED);ANNCREATURE^PLAY([""+IDIRSEL]);}
IDIRSEL:ONCHANGED^6={ICREATUREDIRX^SET(-1);ICREATUREDIRY^SET(1);DCREATURESPEEDADD^SET([DCREATURESPEED*1.41]);ANNCREATURE^PLAY([""+IDIRSEL]);}
IDIRSEL:ONCHANGED^7={ICREATUREDIRX^SET(0);ICREATUREDIRY^SET(1);DCREATURESPEEDADD^SET(DCREATURESPEED);ANNCREATURE^PLAY([""+IDIRSEL]);}
IDIRSEL:ONCHANGED^8={ICREATUREDIRX^SET(1);ICREATUREDIRY^SET(1);DCREATURESPEEDADD^SET([DCREATURESPEED*1.41]);ANNCREATURE^PLAY([""+IDIRSEL]);}

OBJECT=__________
__________:TYPE=INTEGER

OBJECT=BFRIENDON
BFRIENDON:TYPE=BOOL
BFRIENDON:VALUE=FALSE

OBJECT=IFRIENDPOSX
IFRIENDPOSX:TYPE=INTEGER
IFRIENDPOSX:VALUE=0

OBJECT=IFRIENDPOSY
IFRIENDPOSY:TYPE=INTEGER
IFRIENDPOSY:VALUE=0

OBJECT=IFRIENDDIRX
IFRIENDDIRX:TYPE=INTEGER
IFRIENDDIRX:VALUE=0

OBJECT=IFRIENDDIRY
IFRIENDDIRY:TYPE=INTEGER
IFRIENDDIRY:VALUE=0

OBJECT=IFRIENDPRIORITY
IFRIENDPRIORITY:TYPE=INTEGER
IFRIENDPRIORITY:VALUE=0
IFRIENDPRIORITY:ONCHANGED={ANNFRIEND^SETPRIORITY([IFRIENDPRIORITY+401]);}

OBJECT=IFRIENDDIR
IFRIENDDIR:TYPE=INTEGER
IFRIENDDIR:VALUE=-1

OBJECT=IFRIENDDIRSEL
IFRIENDDIRSEL:TYPE=INTEGER
IFRIENDDIRSEL:VALUE=-1
IFRIENDDIRSEL:ONCHANGED^-1={IFRIENDDIRX^SET(0);IFRIENDDIRY^SET(0);}
IFRIENDDIRSEL:ONCHANGED^0={IFRIENDDIRX^SET(-1);IFRIENDDIRY^SET(-1);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^1={IFRIENDDIRX^SET(0);IFRIENDDIRY^SET(-1);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^2={IFRIENDDIRX^SET(1);IFRIENDDIRY^SET(-1);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^3={IFRIENDDIRX^SET(-1);IFRIENDDIRY^SET(0);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^4={IFRIENDDIRX^SET(0);IFRIENDDIRY^SET(0);ANNFRIEND^PLAY(["IDLE_"+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^5={IFRIENDDIRX^SET(1);IFRIENDDIRY^SET(0);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^6={IFRIENDDIRX^SET(-1);IFRIENDDIRY^SET(1);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^7={IFRIENDDIRX^SET(0);IFRIENDDIRY^SET(1);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}
IFRIENDDIRSEL:ONCHANGED^8={IFRIENDDIRX^SET(1);IFRIENDDIRY^SET(1);ANNFRIEND^PLAY([""+IFRIENDDIRSEL]);}

OBJECT=ANNCREATURE
ANNCREATURE:TYPE=ANIMO
ANNCREATURE:VISIBLE=TRUE
ANNCREATURE:FILENAME=
ANNCREATURE:TOCANVAS=TRUE
ANNCREATURE:PRIORITY=400
ANNCREATURE:FPS=16
ANNCREATURE:PRELOAD=TRUE
ANNCREATURE:RELEASE=TRUE
ANNCREATURE:MONITORCOLLISION=FALSE
ANNCREATURE:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNFRIEND
ANNFRIEND:TYPE=ANIMO
ANNFRIEND:VISIBLE=TRUE
ANNFRIEND:FILENAME=
ANNFRIEND:TOCANVAS=TRUE
ANNFRIEND:PRIORITY=400
ANNFRIEND:FPS=16
ANNFRIEND:PRELOAD=TRUE
ANNFRIEND:RELEASE=TRUE
ANNFRIEND:MONITORCOLLISION=FALSE
ANNFRIEND:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNMASK
ANNMASK:TYPE=ANIMO
ANNMASK:VISIBLE=FALSE
ANNMASK:FILENAME=
ANNMASK:TOCANVAS=TRUE
ANNMASK:PRIORITY=333
ANNMASK:FPS=16
ANNMASK:PRELOAD=TRUE
ANNMASK:RELEASE=TRUE
ANNMASK:MONITORCOLLISION=FALSE
ANNMASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNRUNNERMOVE
ANNRUNNERMOVE:TYPE=ANIMO
ANNRUNNERMOVE:VISIBLE=TRUE
ANNRUNNERMOVE:FILENAME=$COMMON\WALKER_MOVE.ANN
ANNRUNNERMOVE:TOCANVAS=TRUE
ANNRUNNERMOVE:PRIORITY=0
ANNRUNNERMOVE:FPS=32
ANNRUNNERMOVE:PRELOAD=TRUE
ANNRUNNERMOVE:RELEASE=TRUE
ANNRUNNERMOVE:MONITORCOLLISION=FALSE
ANNRUNNERMOVE:MONITORCOLLISIONALPHA=FALSE
ANNRUNNERMOVE:ONFRAMECHANGED={@IF("BCREATUREISWALKING","_","TRUE","BFITMP48","BFITMP49");}

OBJECT=SFX_WALK
SFX_WALK:TYPE=SOUND
SFX_WALK:FILENAME=SFX_WALK.WAV
SFX_WALK:PRELOAD=FALSE
SFX_WALK:FLUSHAFTERPLAYED=FALSE
SFX_WALK:ONFINISHED={SFX_WALK^PLAY();}

OBJECT=ARRWEZLYPOSX
ARRWEZLYPOSX:TYPE=ARRAY

OBJECT=ARRWEZLYPOSY
ARRWEZLYPOSY:TYPE=ARRAY

OBJECT=ARRLENWEZLY
ARRLENWEZLY:TYPE=ARRAY

OBJECT=ARRINDWEZLY
ARRINDWEZLY:TYPE=ARRAY

OBJECT=ARRDROGA
ARRDROGA:TYPE=ARRAY

OBJECT=ARRDROGAALL
ARRDROGAALL:TYPE=ARRAY

OBJECT=ARRPATH
ARRPATH:TYPE=ARRAY

OBJECT=ARRMAPA
ARRMAPA:TYPE=MULTIARRAY
ARRMAPA:DIMENSIONS=2

OBJECT=ARRLENMAPA
ARRLENMAPA:TYPE=MULTIARRAY
ARRLENMAPA:DIMENSIONS=2

OBJECT=ARRODWMAPA
ARRODWMAPA:TYPE=MULTIARRAY
ARRODWMAPA:DIMENSIONS=2

OBJECT=ARROZNMAPA
ARROZNMAPA:TYPE=MULTIARRAY
ARROZNMAPA:DIMENSIONS=2

OBJECT=CONSTRUCTOR
CONSTRUCTOR:TYPE=BEHAVIOUR
CONSTRUCTOR:CODE={SCLASSNAME^SET($1);IGRID^SET(20);IGRIDOFFSET^SET(10);IDIR^SET(8);PLAY^RUN("IDLE");}


OBJECT=LOADPATH
LOADPATH:TYPE=BEHAVIOUR
LOADPATH:CODE={SPATHFILENAME^SET($1);@STRING("STMPEVENTNAME",$2);ISIZEX^SET($3);ISIZEY^SET($4);@INT("ITMP0",0);@INT("ITMP1",0);@INT("ITMPX",0);@INT("ITMPY",0);@INT("ITMPPATHCURR",0);@INT("ITMPPATHSNO",0);@STRING("STMP0","");ANNMASK^LOAD([SPATHFILENAME+".ANN"]);ANNMASK^SETFRAME(STMPEVENTNAME,0);IGRID^SET(ANNMASK^GETHEIGHT());ISIZEX^DIV(IGRID);ISIZEY^DIV(IGRID);ANNMASK^MOVE(IGRID,IGRID);IGRIDOFFSET^SET([IGRID@2]);ICREATUREPOSX^SET(1);ICREATUREPOSY^SET(1);ISIZEX^ADD(2);ISIZEY^ADD(2);ARRPATH^REMOVEALL();ARRPATH^LOAD([SPATHFILENAME+"_"+STMPEVENTNAME+".ARR"]);@IF(ARRPATH^GETSIZE(),">","0","BFITMP55","BFITMP56");ANNMASK^SETFRAME(STMPEVENTNAME,1);ANNMASK^MOVE([0-IGRID],[0-IGRID]);ANNMASK^HIDE();IODWMARKER^SET(1);SETPOS^RUN(ICREATUREPOSX,ICREATUREPOSY,FALSE);}


OBJECT=LOADWALKSFX
LOADWALKSFX:TYPE=BEHAVIOUR
LOADWALKSFX:CODE={@STRING("STMPLWSSFXNAME",$1);SFX_WALK^STOP(FALSE);SFX_WALK^LOAD(["$WAVS\"+STMPLWSSFXNAME+".WAV"]);@IF("BCREATUREISWALKING","_","TRUE","BFITMP57","");}


OBJECT=SETPATH
SETPATH:TYPE=BEHAVIOUR
SETPATH:CODE={@INT("ITMPPATHNO",$1);@BOOL("BTMPON",$2);S1^SET(["ONBRUTALCHANGED^"+ITMPPATHNO]);@IF("BTMPON","_","TRUE","BFITMP58","BFITMP59");}


OBJECT=LOADANIM
LOADANIM:TYPE=BEHAVIOUR
LOADANIM:CODE={@STRING("STMPFNC",$1);@STRING("STMPFNF",$2);ANNCREATURE^LOAD([STMPFNC+".ANN"]);@IF(STMPFNF^LENGTH(),">","2","BFITMP60","");SETPOS^RUN(ICREATUREPOSX,ICREATUREPOSY,FALSE);ANNCREATURE^PLAY(["IDLE_"+IDIR]);@IF("BFRIENDON","_","TRUE","BFITMP61","BFITMP62");}


OBJECT=SETPOS
SETPOS:TYPE=BEHAVIOUR
SETPOS:CODE={ICREATUREPOSX^SET($1);ICREATUREPOSY^SET($2);ANNCREATURE^SETPOSITION([[ICREATUREPOSX*IGRID]-IGRIDOFFSET-ISCROLLPOSX],[[ICREATUREPOSY*IGRID]-IGRIDOFFSET-ISCROLLPOSY]);ICREATUREPRIORITY^SET([[ICREATUREPOSY*IGRID]-IGRIDOFFSET+ISCROLLPOSY]);IFRIENDPOSX^SET(ICREATUREPOSX);IFRIENDPOSY^SET(ICREATUREPOSY);ANNFRIEND^SETPOSITION([[IFRIENDPOSX*IGRID]-IGRIDOFFSET-ISCROLLPOSX],[[IFRIENDPOSY*IGRID]-IGRIDOFFSET-ISCROLLPOSY]);IFRIENDPRIORITY^SET([[IFRIENDPOSY*IGRID]-IGRIDOFFSET+ISCROLLPOSY]);@IF("$3","!_","FALSE","BFITMP63","");}


OBJECT=SETSPEED
SETSPEED:TYPE=BEHAVIOUR
SETSPEED:CODE={DCREATURESPEED^SET($1);}


OBJECT=GETSPEED
GETSPEED:TYPE=BEHAVIOUR
GETSPEED:CODE={@RETURN(DCREATURESPEED);}


OBJECT=GOTOMOUSE
GOTOMOUSE:TYPE=BEHAVIOUR
GOTOMOUSE:CODE={IMOUSETARGETX^SET($1);IMOUSETARGETY^SET($2);IMOUSETARGETX^DIV(IGRID);IMOUSETARGETY^DIV(IGRID);IMOUSETARGETX^ADD(1);IMOUSETARGETY^ADD(1);@IF("BLOCKWALKER","_","FALSE","BFITMP70","");}


OBJECT=GOTO
GOTO:TYPE=BEHAVIOUR
GOTO:CODE={IMOUSETARGETX^SET($1);IMOUSETARGETY^SET($2);@IF("BLOCKWALKER","_","FALSE","BFITMP76","");}


OBJECT=GETPOSX
GETPOSX:TYPE=BEHAVIOUR
GETPOSX:CODE={@RETURN(ICREATUREPOSX);}


OBJECT=GETPOSY
GETPOSY:TYPE=BEHAVIOUR
GETPOSY:CODE={@RETURN(ICREATUREPOSY);}


OBJECT=GETCENTERX
GETCENTERX:TYPE=BEHAVIOUR
GETCENTERX:CODE={I1^SET(ANNCREATURE^GETCENTERX());@RETURN(I1);}


OBJECT=GETCENTERY
GETCENTERY:TYPE=BEHAVIOUR
GETCENTERY:CODE={I1^SET(ANNCREATURE^GETCENTERY());@RETURN(I1);}


OBJECT=GETNEXTSTEPX
GETNEXTSTEPX:TYPE=BEHAVIOUR
GETNEXTSTEPX:CODE={@RETURN(ICREATURETARGETX);}


OBJECT=GETNEXTSTEPY
GETNEXTSTEPY:TYPE=BEHAVIOUR
GETNEXTSTEPY:CODE={@RETURN(ICREATURETARGETY);}


OBJECT=ISWALKING
ISWALKING:TYPE=BEHAVIOUR
ISWALKING:CODE={@RETURN(BCREATUREISWALKING);}


OBJECT=DISABLE
DISABLE:TYPE=BEHAVIOUR
DISABLE:CODE={BLOCKWALKER^SET(TRUE);ANNCREATURE^STOP(FALSE);ANNCREATURE^HIDE();@IF("BFRIENDON","_","TRUE","BFITMP77","");}


OBJECT=ENABLE
ENABLE:TYPE=BEHAVIOUR
ENABLE:CODE={ANNCREATURE^SHOW();@IF("BFRIENDON","_","TRUE","BFITMP78","");BLOCKWALKER^SET(FALSE);}


OBJECT=HIDE
HIDE:TYPE=BEHAVIOUR
HIDE:CODE={ANNCREATURE^STOP(FALSE);ANNCREATURE^HIDE();@IF("BFRIENDON","_","TRUE","BFITMP79","");}


OBJECT=HIDE_LEADER
HIDE_LEADER:TYPE=BEHAVIOUR
HIDE_LEADER:CODE={ANNCREATURE^STOP(FALSE);ANNCREATURE^HIDE();}


OBJECT=SHOW
SHOW:TYPE=BEHAVIOUR
SHOW:CODE={ANNCREATURE^SHOW();@IF("BFRIENDON","_","TRUE","BFITMP80","");}


OBJECT=MOVE
MOVE:TYPE=BEHAVIOUR
MOVE:CODE={ANNCREATURE^MOVE($1,$2);ANNFRIEND^MOVE($1,$2);ANNMASK^MOVE($1,$2);}


OBJECT=NEXT
NEXT:TYPE=BEHAVIOUR
NEXT:CODE={ARRDROGA^REMOVEAT(0);BCREATUREISWALKING^SET(FALSE);}


OBJECT=STOP
STOP:TYPE=BEHAVIOUR
STOP:CODE={@IF("$1","_","FALSE","BFITMP81","BFITMP82");ARRDROGA^REMOVEALL();BCREATUREISWALKING^SET(FALSE);ANNCREATURE^PLAY(["IDLE_"+IDIR]);@IF("BFRIENDON","_","TRUE","BFITMP83","");}


OBJECT=PLAY
PLAY:TYPE=BEHAVIOUR
PLAY:CODE={S1^SET($1);@IF("S1^GET(0,3)'"F__"&&BFRIENDON'TRUE","BFITMP84","BFITMP85");IDIRSEL^SET(-1);IFRIENDDIRSEL^SET(-1);}


OBJECT=PLAYC
PLAYC:TYPE=BEHAVIOUR
PLAYC:CODE={S1^SET($1);@IF(S1^GET(0,3),"_",""F__"","BFITMP87","BFITMP88");IDIRSEL^SET(-1);IFRIENDDIRSEL^SET(-1);}


OBJECT=__________
__________:TYPE=BEHAVIOUR
__________:CODE={}


OBJECT=ADDFRIEND
ADDFRIEND:TYPE=BEHAVIOUR
ADDFRIEND:CODE={@STRING("STMPFRNAME",$1);@IF("BFRIENDON","_","FALSE","BFITMP89","");}


OBJECT=REMOVEFRIEND
REMOVEFRIEND:TYPE=BEHAVIOUR
REMOVEFRIEND:CODE={@IF("BFRIENDON","_","TRUE","BFITMP90","");}


OBJECT=__________
__________:TYPE=BEHAVIOUR
__________:CODE={}


OBJECT=PRIVFINDCLOSEST
PRIVFINDCLOSEST:TYPE=BEHAVIOUR
PRIVFINDCLOSEST:CODE={@INT("IFCX",IMOUSETARGETX);@INT("IFCY",IMOUSETARGETY);@INT("IFCC",1);@INT("IFCI",0);@INT("IFCZNAK",1);@BOOL("BFCFOUND",FALSE);@WHILE("BFCFOUND","_","FALSE","{IFCI^SET(0);@WHILE("IFCI","<","IFCC","{@IF("BFCFOUND","_","FALSE","BFITMP94","");IFCI^INC();}");IFCI^SET(0);@WHILE("IFCI","<","IFCC","{@IF("BFCFOUND","_","FALSE","BFITMP98","");IFCI^INC();}");IFCC^INC();IFCZNAK^MUL(-1);}");IMOUSETARGETX^SET(IFCX);IMOUSETARGETY^SET(IFCY);}


OBJECT=PRIVFINDPATH
PRIVFINDPATH:TYPE=BEHAVIOUR
PRIVFINDPATH:CODE={IKOMORKANEW^SET(0);ITARGETREACHED^SET(-1);ARRDROGA^REMOVEALL();ARRDROGAALL^REMOVEALL();ARRWEZLYPOSX^REMOVEALL();ARRWEZLYPOSY^REMOVEALL();ARRLENWEZLY^REMOVEALL();ARRINDWEZLY^REMOVEALL();@IF(ARRMAPA^GET(IMOUSETARGETX,IMOUSETARGETY),">","0","BFITMP99","BFITMP100");ARRWEZLYPOSX^ADD(ICREATUREPOSX);ARRWEZLYPOSY^ADD(ICREATUREPOSY);D1^SET([IMOUSETARGETX-ICREATUREPOSX]);D2^SET([IMOUSETARGETY-ICREATUREPOSY]);DODLEGLOSCODB^SET([[D1*D1]+[D2*D2]]);DODLEGLOSCODB^SQRT();ARRLENWEZLY^ADD(DODLEGLOSCODB);ARRINDWEZLY^ADD(0);DODLEGLOSCODBMIN^SET(9999999.9);DSASIADMIN^SET(9999999.9);ARRLENMAPA^SET(ICREATUREPOSX,ICREATUREPOSY,0);@WHILE("ITARGETREACHED","_","-1","{DODLEGLOSCODB^SET(9999999.9);@IF("DSASIADMIN","<","DODLEGLOSCODB","BFITMP102","BFITMP103");@IF("DODLEGLOSCODB","<","DODLEGLOSCODBMIN","BFITMP104","");IKOMORKAX^SET(ARRWEZLYPOSX^GET(IKOMORKA));IKOMORKAY^SET(ARRWEZLYPOSY^GET(IKOMORKA));@IF(ARRODWMAPA^GET(IKOMORKAX,IKOMORKAY),"<","IODWMARKER","BFITMP105","BFITMP106");}");@IF("ITARGETREACHED","_","-2","BFITMP107","");ARRDROGAALL^ADD(ITARGETREACHED);IKOMORKA^SET(ITARGETREACHED);IKOMORKAX^SET(ARRWEZLYPOSX^GET(IKOMORKA));IKOMORKAY^SET(ARRWEZLYPOSY^GET(IKOMORKA));IKOMORKALASTX^SET(IKOMORKAX);IKOMORKALASTY^SET(IKOMORKAY);I2^SET(ARRLENMAPA^GET(IKOMORKAX,IKOMORKAY));I1^SET([ARRDROGAALL^GETSIZE()-2]);ARRDROGA^ADD(ITARGETREACHED);@WHILE("I2",">","0","{IKOMORKA^SET(ARRDROGAALL^GET(I1));IKOMORKAX^SET(ARRWEZLYPOSX^GET(IKOMORKA));IKOMORKAY^SET(ARRWEZLYPOSY^GET(IKOMORKA));@IF(ARRLENMAPA^GET(IKOMORKAX,IKOMORKAY),"_",[I2-1],"BFITMP109","");I1^DEC();}");@IF(ARRDROGA^GETSIZE(),">","0","BFITMP110","");IODWMARKER^INC();}


OBJECT=PRIVONFIELD
PRIVONFIELD:TYPE=BEHAVIOUR
PRIVONFIELD:CODE={@IF(ARRODWMAPA^GET(ISASIADX,ISASIADY),"<","IODWMARKER","BFITMP115","");}


OBJECT=PRIVCHANGETARGET
PRIVCHANGETARGET:TYPE=BEHAVIOUR
PRIVCHANGETARGET:CODE={@IF("IMOUSETARGETX!'ICREATUREPOSX||IMOUSETARGETY!'ICREATUREPOSY","BFITMP117","BFITMP118");}


OBJECT=PRIVSETANIMANGLE
PRIVSETANIMANGLE:TYPE=BEHAVIOUR
PRIVSETANIMANGLE:CODE={I1^SET([ICREATURETARGETX-ICREATUREPOSX]);I2^SET([ICREATURETARGETY-ICREATUREPOSY]);IDIR^SET([I1+[3*I2]+4]);IDIRSEL^SET(IDIR);}


OBJECT=PRIVSETFRIENDANGLE
PRIVSETFRIENDANGLE:TYPE=BEHAVIOUR
PRIVSETFRIENDANGLE:CODE={@IF("BFRIENDON","_","TRUE","BFITMP119","");}


OBJECT=__________
__________:TYPE=BEHAVIOUR
__________:CODE={}


OBJECT=SHOWINFO
SHOWINFO:TYPE=BEHAVIOUR
SHOWINFO:CODE={I1^SET($1);I2^SET($2);I1^DIV(IGRID);I2^DIV(IGRID);I1^ADD(1);I2^ADD(1);LOG^PUT([""+I1+"_"+I2+"__"+ARRMAPA^GET(I1,I2)]);}


OBJECT=BFITMP33
BFITMP33:TYPE=BEHAVIOUR
BFITMP33:CODE={DCREATUREWENTSOFARX^SUB(I1);ICREATUREDELTATOGOX^SUB(I1);}


OBJECT=BFITMP34
BFITMP34:TYPE=BEHAVIOUR
BFITMP34:CODE={DCREATUREWENTSOFARX^SUB(I2);ICREATUREDELTATOGOY^SUB(I2);ICREATUREPRIORITY^ADD([I2*ICREATUREDIRY]);}


OBJECT=BFITMP35
BFITMP35:TYPE=BEHAVIOUR
BFITMP35:CODE={I1^SET(I2);}


OBJECT=BFITMP36
BFITMP36:TYPE=BEHAVIOUR
BFITMP36:CODE={@IF("I2",">","0","BFITMP35","");I1^SET(I1^ABS(I1));IFRIENDPRIORITY^ADD([I1*IFRIENDDIRY]);ANNFRIEND^MOVE([I1*IFRIENDDIRX],[I1*IFRIENDDIRY]);}


OBJECT=BFITMP37
BFITMP37:TYPE=BEHAVIOUR
BFITMP37:CODE={ANNCREATURE^MOVE([I1*ICREATUREDIRX],[I2*ICREATUREDIRY]);@IF("BFRIENDON","_","TRUE","BFITMP36","");}


OBJECT=BFITMP38
BFITMP38:TYPE=BEHAVIOUR
BFITMP38:CODE={ANNRUNNERMOVE^STOP(FALSE);PRIVCHANGETARGET^RUN();}


OBJECT=BFITMP39
BFITMP39:TYPE=BEHAVIOUR
BFITMP39:CODE={ANNRUNNERMOVE^PLAY("RUN");}


OBJECT=BFITMP40
BFITMP40:TYPE=BEHAVIOUR
BFITMP40:CODE={@IF("IMOUSETARGETX!'ICREATUREPOSX||IMOUSETARGETY!'ICREATUREPOSY","BFITMP38","BFITMP39");}


OBJECT=BFITMP41
BFITMP41:TYPE=BEHAVIOUR
BFITMP41:CODE={ANNRUNNERMOVE^PLAY("RUN");}


OBJECT=BFITMP42
BFITMP42:TYPE=BEHAVIOUR
BFITMP42:CODE={DCREATUREWENTSOFARX^ADD(DCREATURESPEEDADD);DCREATUREWENTSOFARY^ADD(DCREATURESPEEDADD);I1^SET(DCREATUREWENTSOFARX);I2^SET(DCREATUREWENTSOFARX);I1^CLAMP(0,ICREATUREDELTATOGOX);I2^CLAMP(0,ICREATUREDELTATOGOY);@IF("I1",">","0","BFITMP33","");@IF("I2",">","0","BFITMP34","");@IF("I1>0||I2>0","BFITMP37","");}


OBJECT=BFITMP43
BFITMP43:TYPE=BEHAVIOUR
BFITMP43:CODE={BCREATUREISWALKING^SET(FALSE);IFRIENDPOSX^SET(ICREATUREPOSX);IFRIENDPOSY^SET(ICREATUREPOSY);ICREATUREPOSX^SET(ICREATURETARGETX);ICREATUREPOSY^SET(ICREATURETARGETY);@IF("BNEWTARGET","_","TRUE","BFITMP40","BFITMP41");}


OBJECT=BFITMP44
BFITMP44:TYPE=BEHAVIOUR
BFITMP44:CODE={ANNFRIEND^PLAY(["IDLE_"+IFRIENDDIR]);}


OBJECT=BFITMP45
BFITMP45:TYPE=BEHAVIOUR
BFITMP45:CODE={ANNCREATURE^PLAY(["IDLE_"+IDIR]);@IF("BFRIENDON","_","TRUE","BFITMP44","");SWALKERSIGNAL^SET([SCLASSNAME+"_TARGET_REACHED"]);}


OBJECT=BFITMP46
BFITMP46:TYPE=BEHAVIOUR
BFITMP46:CODE={BRETSIGNAL^SET(TRUE);I1^SET(ARRDROGA^GET(0));ARRDROGA^REMOVEAT(0);ICREATURETARGETX^SET(ARRWEZLYPOSX^GET(I1));ICREATURETARGETY^SET(ARRWEZLYPOSY^GET(I1));DCREATUREWENTSOFARX^SET(0.0);DCREATUREWENTSOFARY^SET(0.0);PRIVSETANIMANGLE^RUN();PRIVSETFRIENDANGLE^RUN();ICREATUREDELTATOGOX^SET([IGRID*ICREATUREDIRX]);ICREATUREDELTATOGOY^SET([IGRID*ICREATUREDIRY]);ICREATUREDELTATOGOX^SET(ICREATUREDELTATOGOX^ABS(ICREATUREDELTATOGOX));ICREATUREDELTATOGOY^SET(ICREATUREDELTATOGOY^ABS(ICREATUREDELTATOGOY));BCREATUREISWALKING^SET(TRUE);SWALKERSIGNAL^SET([SCLASSNAME+"_GO_ON"]);ANNRUNNERMOVE^PLAY("RUN");}


OBJECT=BFITMP47
BFITMP47:TYPE=BEHAVIOUR
BFITMP47:CODE={ANNRUNNERMOVE^STOP(FALSE);IDIRSEL^SET(-1);IFRIENDDIRSEL^SET(-1);@IF("BRETSIGNAL","_","TRUE","BFITMP45","");}


OBJECT=BFITMP48
BFITMP48:TYPE=BEHAVIOUR
BFITMP48:CODE={@IF("ICREATUREDELTATOGOX!'0||ICREATUREDELTATOGOY!'0","BFITMP42","BFITMP43");}


OBJECT=BFITMP49
BFITMP49:TYPE=BEHAVIOUR
BFITMP49:CODE={@IF(ARRDROGA^GETSIZE(),">","0","BFITMP46","BFITMP47");}


OBJECT=BFITMP50
BFITMP50:TYPE=BEHAVIOUR
BFITMP50:CODE={ARRMAPA^SET(ITMPX,ITMPY,0);ARRPATH^ADD(0);}


OBJECT=BFITMP51
BFITMP51:TYPE=BEHAVIOUR
BFITMP51:CODE={ARRMAPA^SET(ITMPX,ITMPY,1);ARRPATH^ADD(1);}


OBJECT=BFITMP52
BFITMP52:TYPE=BEHAVIOUR
BFITMP52:CODE={ARRMAPA^SET(ITMPX,ITMPY,ITMPPATHCURR);ITMP0^SET([[ITMPY*ISIZEX]+ITMPX]);ARRPATH^CHANGEAT(ITMP0,ITMPPATHCURR);}


OBJECT=BFITMP53
BFITMP53:TYPE=BEHAVIOUR
BFITMP53:CODE={@IF("STMP0","_","NULL","BFITMP50","BFITMP51");ARRLENMAPA^SET(ITMPX,ITMPY,0);ARRODWMAPA^SET(ITMPX,ITMPY,0);ARROZNMAPA^SET(ITMPX,ITMPY,0);}


OBJECT=BFITMP54
BFITMP54:TYPE=BEHAVIOUR
BFITMP54:CODE={@IF("STMP0","!_","NULL","BFITMP52","");}


OBJECT=BFITMP55
BFITMP55:TYPE=BEHAVIOUR
BFITMP55:CODE={ITMPY^SET(0);@WHILE("ITMPY","<","ISIZEY","{@LOOP("{ITMPX^SET(_I_);ITMP0^SET([[ITMPY*ISIZEX]+ITMPX]);ARRMAPA^SET(ITMPX,ITMPY,ARRPATH^GET(ITMP0));ARRLENMAPA^SET(ITMPX,ITMPY,0);ARRODWMAPA^SET(ITMPX,ITMPY,0);ARROZNMAPA^SET(ITMPX,ITMPY,0);}",0,ISIZEX,1);ITMPY^INC();}");}


OBJECT=BFITMP56
BFITMP56:TYPE=BEHAVIOUR
BFITMP56:CODE={ITMPPATHSNO^SET(ANNMASK^GETNOFINEVENT(STMPEVENTNAME));ITMPPATHCURR^SET(1);@WHILE("ITMPPATHCURR","<","ITMPPATHSNO","{ANNMASK^SETFRAME(STMPEVENTNAME,ITMPPATHCURR);ITMPY^SET(0);@WHILE("ITMPY","<","ISIZEY","{@LOOP("{ITMPX^SET(_I_);ITMP0^SET([[ITMPX*IGRID]+IGRIDHALF]);ITMP1^SET([[ITMPY*IGRID]+IGRIDHALF]);STMP0^SET(CANVASOBSERVER^GETGRAPHICSAT(ITMP0,ITMP1,FALSE,333,333,FALSE));@IF("ITMPPATHCURR","_","1","BFITMP53","BFITMP54");}",0,ISIZEX,1);ITMPY^INC();}");ITMPPATHCURR^INC();}");ARRPATH^SAVE([SPATHFILENAME+"_"+STMPEVENTNAME+".ARR"]);}


OBJECT=BFITMP57
BFITMP57:TYPE=BEHAVIOUR
BFITMP57:CODE={SFX_WALK^PLAY();}


OBJECT=BFITMP58
BFITMP58:TYPE=BEHAVIOUR
BFITMP58:CODE={ISASIADK^ADDBEHAVIOUR(S1,"PRIVONFIELD");}


OBJECT=BFITMP59
BFITMP59:TYPE=BEHAVIOUR
BFITMP59:CODE={ISASIADK^REMOVEBEHAVIOUR(S1);}


OBJECT=BFITMP60
BFITMP60:TYPE=BEHAVIOUR
BFITMP60:CODE={ANNFRIEND^LOAD([STMPFNF+".ANN"]);}


OBJECT=BFITMP61
BFITMP61:TYPE=BEHAVIOUR
BFITMP61:CODE={ANNFRIEND^PLAY(["IDLE_"+IFRIENDDIR]);}


OBJECT=BFITMP62
BFITMP62:TYPE=BEHAVIOUR
BFITMP62:CODE={ANNFRIEND^HIDE();}


OBJECT=BFITMP63
BFITMP63:TYPE=BEHAVIOUR
BFITMP63:CODE={GSAVE^SET("ARCADE_LEADER_POS_X",ICREATUREPOSX);GSAVE^SET("ARCADE_LEADER_POS_Y",ICREATUREPOSY);}


OBJECT=BFITMP64
BFITMP64:TYPE=BEHAVIOUR
BFITMP64:CODE={PRIVFINDCLOSEST^RUN();}


OBJECT=BFITMP65
BFITMP65:TYPE=BEHAVIOUR
BFITMP65:CODE={PRIVFINDPATH^RUN();ANNRUNNERMOVE^PLAY("RUN");}


OBJECT=BFITMP66
BFITMP66:TYPE=BEHAVIOUR
BFITMP66:CODE={BNEWTARGET^SET(TRUE);}


OBJECT=BFITMP67
BFITMP67:TYPE=BEHAVIOUR
BFITMP67:CODE={SWALKERSIGNAL^SET([SCLASSNAME+"_TARGET_REACHED"]);}


OBJECT=BFITMP68
BFITMP68:TYPE=BEHAVIOUR
BFITMP68:CODE={@IF("BCREATUREISWALKING","_","FALSE","BFITMP65","BFITMP66");}


OBJECT=BFITMP69
BFITMP69:TYPE=BEHAVIOUR
BFITMP69:CODE={@IF("BCREATUREISWALKING","_","FALSE","BFITMP67","");}


OBJECT=BFITMP70
BFITMP70:TYPE=BEHAVIOUR
BFITMP70:CODE={@IF(ARRMAPA^GET(IMOUSETARGETX,IMOUSETARGETY),"_","0","BFITMP64","");@IF("IMOUSETARGETX!'ICREATUREPOSX||IMOUSETARGETY!'ICREATUREPOSY","BFITMP68","BFITMP69");}


OBJECT=BFITMP71
BFITMP71:TYPE=BEHAVIOUR
BFITMP71:CODE={PRIVFINDPATH^RUN();ANNRUNNERMOVE^PLAY("RUN");}


OBJECT=BFITMP72
BFITMP72:TYPE=BEHAVIOUR
BFITMP72:CODE={BNEWTARGET^SET(TRUE);}


OBJECT=BFITMP73
BFITMP73:TYPE=BEHAVIOUR
BFITMP73:CODE={SWALKERSIGNAL^SET([SCLASSNAME+"_TARGET_REACHED"]);}


OBJECT=BFITMP74
BFITMP74:TYPE=BEHAVIOUR
BFITMP74:CODE={@IF("BCREATUREISWALKING","_","FALSE","BFITMP71","BFITMP72");}


OBJECT=BFITMP75
BFITMP75:TYPE=BEHAVIOUR
BFITMP75:CODE={@IF("BCREATUREISWALKING","_","FALSE","BFITMP73","");}


OBJECT=BFITMP76
BFITMP76:TYPE=BEHAVIOUR
BFITMP76:CODE={@IF("IMOUSETARGETX!'ICREATUREPOSX||IMOUSETARGETY!'ICREATUREPOSY","BFITMP74","BFITMP75");}


OBJECT=BFITMP77
BFITMP77:TYPE=BEHAVIOUR
BFITMP77:CODE={ANNFRIEND^STOP(FALSE);ANNFRIEND^HIDE();}


OBJECT=BFITMP78
BFITMP78:TYPE=BEHAVIOUR
BFITMP78:CODE={ANNFRIEND^SHOW();}


OBJECT=BFITMP79
BFITMP79:TYPE=BEHAVIOUR
BFITMP79:CODE={ANNFRIEND^STOP(FALSE);ANNFRIEND^HIDE();}


OBJECT=BFITMP80
BFITMP80:TYPE=BEHAVIOUR
BFITMP80:CODE={ANNFRIEND^SHOW();}


OBJECT=BFITMP81
BFITMP81:TYPE=BEHAVIOUR
BFITMP81:CODE={BRETSIGNAL^SET(FALSE);}


OBJECT=BFITMP82
BFITMP82:TYPE=BEHAVIOUR
BFITMP82:CODE={BRETSIGNAL^SET(TRUE);}


OBJECT=BFITMP83
BFITMP83:TYPE=BEHAVIOUR
BFITMP83:CODE={ANNFRIEND^PLAY(["IDLE_"+IFRIENDDIR]);}


OBJECT=BFITMP84
BFITMP84:TYPE=BEHAVIOUR
BFITMP84:CODE={S1^SUB(0,3);ANNFRIEND^PLAY([S1+"_"+IFRIENDDIR]);}


OBJECT=BFITMP85
BFITMP85:TYPE=BEHAVIOUR
BFITMP85:CODE={ANNCREATURE^PLAY([S1+"_"+IDIR]);}


OBJECT=BFITMP86
BFITMP86:TYPE=BEHAVIOUR
BFITMP86:CODE={S1^SUB(0,3);I1^SET(S1^LENGTH());IFRIENDDIR^SET(S1^GET([I1-1],1));ANNFRIEND^PLAY(S1);}


OBJECT=BFITMP87
BFITMP87:TYPE=BEHAVIOUR
BFITMP87:CODE={@IF("BFRIENDON","_","TRUE","BFITMP86","");}


OBJECT=BFITMP88
BFITMP88:TYPE=BEHAVIOUR
BFITMP88:CODE={I1^SET(S1^LENGTH());IDIR^SET(S1^GET([I1-1],1));ANNCREATURE^PLAY(S1);}


OBJECT=BFITMP89
BFITMP89:TYPE=BEHAVIOUR
BFITMP89:CODE={ANNFRIEND^LOAD([STMPFRNAME+".ANN"]);SETPOS^RUN(ICREATUREPOSX,ICREATUREPOSY,FALSE);IFRIENDDIR^SET(6);ANNFRIEND^PLAY(["IDLE_"+IFRIENDDIR]);BFRIENDON^SET(TRUE);}


OBJECT=BFITMP90
BFITMP90:TYPE=BEHAVIOUR
BFITMP90:CODE={BFRIENDON^SET(FALSE);IFRIENDDIRSEL^SET(-1);ANNFRIEND^STOP(FALSE);ANNFRIEND^HIDE();}


OBJECT=BFITMP91
BFITMP91:TYPE=BEHAVIOUR
BFITMP91:CODE={BFCFOUND^SET(TRUE);}


OBJECT=BFITMP92
BFITMP92:TYPE=BEHAVIOUR
BFITMP92:CODE={@IF(ARRMAPA^GET(IFCX,IFCY),"!_","0","BFITMP91","");}


OBJECT=BFITMP93
BFITMP93:TYPE=BEHAVIOUR
BFITMP93:CODE={@IF("IFCY>0&&IFCY<ISIZEY","BFITMP92","");}


OBJECT=BFITMP94
BFITMP94:TYPE=BEHAVIOUR
BFITMP94:CODE={IFCX^ADD(IFCZNAK);@IF("IFCX>0&&IFCX<ISIZEX","BFITMP93","");}


OBJECT=BFITMP95
BFITMP95:TYPE=BEHAVIOUR
BFITMP95:CODE={BFCFOUND^SET(TRUE);}


OBJECT=BFITMP96
BFITMP96:TYPE=BEHAVIOUR
BFITMP96:CODE={@IF(ARRMAPA^GET(IFCX,IFCY),"!_","0","BFITMP95","");}


OBJECT=BFITMP97
BFITMP97:TYPE=BEHAVIOUR
BFITMP97:CODE={@IF("IFCX>0&&IFCX<ISIZEX","BFITMP96","");}


OBJECT=BFITMP98
BFITMP98:TYPE=BEHAVIOUR
BFITMP98:CODE={IFCY^ADD(IFCZNAK);@IF("IFCY>0&&IFCY<ISIZEY","BFITMP97","");}


OBJECT=BFITMP99
BFITMP99:TYPE=BEHAVIOUR
BFITMP99:CODE={DTOLERANCJA^SET(0.0);}


OBJECT=BFITMP100
BFITMP100:TYPE=BEHAVIOUR
BFITMP100:CODE={DTOLERANCJA^SET(1.5);}


OBJECT=BFITMP101
BFITMP101:TYPE=BEHAVIOUR
BFITMP101:CODE={DODLEGLOSCODB^SET(D2);IKOMORKAOLD^SET(_I_);IKOMORKA^SET(ARRINDWEZLY^GET(IKOMORKAOLD));}


OBJECT=BFITMP102
BFITMP102:TYPE=BEHAVIOUR
BFITMP102:CODE={IKOMORKA^SET(ISASIADMIN);DODLEGLOSCODB^SET(DSASIADMIN);}


OBJECT=BFITMP103
BFITMP103:TYPE=BEHAVIOUR
BFITMP103:CODE={IKOMORKA^SET(0);@LOOP("{D2^SET(ARRLENWEZLY^GET(_I_));@IF("D2","<","DODLEGLOSCODB","BFITMP101","");}",0,ARRLENWEZLY^GETSIZE(),1);}


OBJECT=BFITMP104
BFITMP104:TYPE=BEHAVIOUR
BFITMP104:CODE={DODLEGLOSCODBMIN^SET(DODLEGLOSCODB);IKOMORKACLOSEST^SET(IKOMORKA);}


OBJECT=BFITMP105
BFITMP105:TYPE=BEHAVIOUR
BFITMP105:CODE={ARRODWMAPA^SET(IKOMORKAX,IKOMORKAY,IODWMARKER);ARRLENWEZLY^REMOVEAT(IKOMORKAOLD);ARRINDWEZLY^REMOVEAT(IKOMORKAOLD);DSASIADMIN^SET(9999999.9);ISASIADX^SET(IKOMORKAX);ISASIADY^SET([IKOMORKAY-1]);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ISASIADX^SET([IKOMORKAX+1]);ISASIADY^SET(IKOMORKAY);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ISASIADX^SET(IKOMORKAX);ISASIADY^SET([IKOMORKAY+1]);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ISASIADX^SET([IKOMORKAX-1]);ISASIADY^SET(IKOMORKAY);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ISASIADX^SET([IKOMORKAX-1]);ISASIADY^SET([IKOMORKAY-1]);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ISASIADX^SET([IKOMORKAX+1]);ISASIADY^SET([IKOMORKAY-1]);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ISASIADX^SET([IKOMORKAX+1]);ISASIADY^SET([IKOMORKAY+1]);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ISASIADX^SET([IKOMORKAX-1]);ISASIADY^SET([IKOMORKAY+1]);ISASIADK^SET(ARRMAPA^GET(ISASIADX,ISASIADY));ARRDROGAALL^ADD(IKOMORKA);}


OBJECT=BFITMP106
BFITMP106:TYPE=BEHAVIOUR
BFITMP106:CODE={ITARGETREACHED^SET(-2);}


OBJECT=BFITMP107
BFITMP107:TYPE=BEHAVIOUR
BFITMP107:CODE={ITARGETREACHED^SET(IKOMORKACLOSEST);}


OBJECT=BFITMP108
BFITMP108:TYPE=BEHAVIOUR
BFITMP108:CODE={I2^DEC();ARRDROGA^INSERTAT(0,IKOMORKA);IKOMORKALASTX^SET(IKOMORKAX);IKOMORKALASTY^SET(IKOMORKAY);}


OBJECT=BFITMP109
BFITMP109:TYPE=BEHAVIOUR
BFITMP109:CODE={I3^SET([IKOMORKAX-IKOMORKALASTX]);I4^SET([IKOMORKAY-IKOMORKALASTY]);I3^SET(I3^ABS(I3));I4^SET(I4^ABS(I4));@IF("I3<2&&I4<2","BFITMP108","");}


OBJECT=BFITMP110
BFITMP110:TYPE=BEHAVIOUR
BFITMP110:CODE={ARRDROGA^REMOVEAT(0);}


OBJECT=BFITMP111
BFITMP111:TYPE=BEHAVIOUR
BFITMP111:CODE={DSASIADMIN^SET(D1);ISASIADMIN^SET(IKOMORKANEW);IKOMORKAOLD^SET(ARRLENWEZLY^GETSIZE());}


OBJECT=BFITMP112
BFITMP112:TYPE=BEHAVIOUR
BFITMP112:CODE={ITARGETREACHED^SET(IKOMORKANEW);}


OBJECT=BFITMP113
BFITMP113:TYPE=BEHAVIOUR
BFITMP113:CODE={@IF("D1","<","DSASIADMIN","BFITMP111","");}


OBJECT=BFITMP114
BFITMP114:TYPE=BEHAVIOUR
BFITMP114:CODE={IKOMORKANEW^INC();ARROZNMAPA^SET(ISASIADX,ISASIADY,IODWMARKER);ARRWEZLYPOSX^ADD(ISASIADX);ARRWEZLYPOSY^ADD(ISASIADY);D1^SET([IMOUSETARGETX-ISASIADX]);D2^SET([IMOUSETARGETY-ISASIADY]);D1^SET([[D1*D1]+[D2*D2]]);D1^SQRT();@IF("D1","<_","DTOLERANCJA","BFITMP112","BFITMP113");ARRLENWEZLY^ADD(D1);ARRINDWEZLY^ADD(IKOMORKANEW);}


OBJECT=BFITMP115
BFITMP115:TYPE=BEHAVIOUR
BFITMP115:CODE={ARRLENMAPA^SET(ISASIADX,ISASIADY,[ARRLENMAPA^GET(IKOMORKAX,IKOMORKAY)+1]);@IF(ARROZNMAPA^GET(ISASIADX,ISASIADY),"<","IODWMARKER","BFITMP114","");}


OBJECT=BFITMP116
BFITMP116:TYPE=BEHAVIOUR
BFITMP116:CODE={PRIVFINDPATH^RUN();BNEWTARGET^SET(FALSE);ANNRUNNERMOVE^PLAY("RUN");}


OBJECT=BFITMP117
BFITMP117:TYPE=BEHAVIOUR
BFITMP117:CODE={@IF("BCREATUREISWALKING","_","FALSE","BFITMP116","");}


OBJECT=BFITMP118
BFITMP118:TYPE=BEHAVIOUR
BFITMP118:CODE={SWALKERSIGNAL^SET([SCLASSNAME+"_TARGET_REACHED"]);}


OBJECT=BFITMP119
BFITMP119:TYPE=BEHAVIOUR
BFITMP119:CODE={I1^SET([ICREATUREPOSX-IFRIENDPOSX]);I2^SET([ICREATUREPOSY-IFRIENDPOSY]);IFRIENDDIR^SET([I1+[3*I2]+4]);IFRIENDDIRSEL^SET(IFRIENDDIR);}


