OBJECT=MUSIC
MUSIC:TYPE=MUSIC
MUSIC:FILENAME=DOROZKA.WAV

OBJECT=D1
D1:TYPE=DOUBLE

OBJECT=D2
D2:TYPE=DOUBLE

OBJECT=D3
D3:TYPE=DOUBLE

OBJECT=D4
D4:TYPE=DOUBLE

OBJECT=I1
I1:TYPE=INTEGER

OBJECT=I2
I2:TYPE=INTEGER

OBJECT=I3
I3:TYPE=INTEGER

OBJECT=S1
S1:TYPE=STRING

OBJECT=S2
S2:TYPE=STRING

OBJECT=IJAZDAWAVE
IJAZDAWAVE:TYPE=INTEGER
IJAZDAWAVE:VALUE=0
IJAZDAWAVE:ONCHANGED^0={SFX_DOROZKA_BLOTO^STOP(FALSE);SFX_DOROZKA_JAZDA^PLAY();}
IJAZDAWAVE:ONCHANGED^1={SFX_DOROZKA_JAZDA^STOP(FALSE);SFX_DOROZKA_BLOTO^PLAY();}

OBJECT=_____
_____:TYPE=INTEGER

OBJECT=ILEVEL
ILEVEL:TYPE=INTEGER
ILEVEL:VALUE=0

OBJECT=SLEVELSEL
SLEVELSEL:TYPE=STRING
SLEVELSEL:ONBRUTALCHANGED^1CHEAT={ILEVEL^SET(1);ANNKON^LOAD("CZOLG.ANN");ANNKOLASA^LOAD("WIEZYCZKA.ANN");ANNKON^SETPRIORITY(55);ANNKOLASA^SETPRIORITY(50);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(55.0);DKOLASAHALFWIDTH^SET(26.0);DKONLEN^SET(32.0);DKONACCELERATION^SET(0.20);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-3.0);DKONSPEEDMAX^SET(10.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);GTRASA^ADD("ANNBUM");BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();}
SLEVELSEL:ONBRUTALCHANGED^1EASY={ILEVEL^SET(1);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(36.0);DKOLASAHALFWIDTH^SET(16.0);DKONLEN^SET(55.0);DKONACCELERATION^SET(0.075);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-1.0);DKONSPEEDMAX^SET(7.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();}
SLEVELSEL:ONBRUTALCHANGED^1NORMAL={ILEVEL^SET(1);IPLANSIZEPXX^SET(3200);IPLANSIZEPXY^SET(3200);DKOLASALEN^SET(36.0);DKOLASAHALFWIDTH^SET(16.0);DKONLEN^SET(55.0);DKONACCELERATION^SET(0.05);DKONSPEED^SET(0.0);DKONSPEEDMIN^SET(-0.7);DKONSPEEDMAX^SET(9.0);IKONANGLE^SET(0);IKONANGLENEW^SET(0);IKONPOSX^SET(550);IKONPOSY^SET(3100);ANNKON^SETPOSITION(IKONPOSX,IKONPOSY);ANNKOLASA^SETPOSITION(IKONPOSX,IKONPOSY);DKONPOSX^SET(IKONPOSX);DKONPOSY^SET(IKONPOSY);BEHINITSKRZYNIE^RUN();BEHMOVEALLTOKON^RUN();IMGZEGAR^SHOW();ANNWSKAZOWKA^SHOW();ICZAS^ADDBEHAVIOUR("ONCHANGED","BEHCZAS");}

OBJECT=ISEQPRIORITY
ISEQPRIORITY:TYPE=INTEGER
ISEQPRIORITY:VALUE=-1
ISEQPRIORITY:ONCHANGED^-1={SSEQNAME^SET(NULL);SSEQEVENT^SET(NULL);}

OBJECT=SSEQNAME
SSEQNAME:TYPE=STRING

OBJECT=SSEQEVENT
SSEQEVENT:TYPE=STRING

OBJECT=_____
_____:TYPE=INTEGER

OBJECT=ICOLLSEL
ICOLLSEL:TYPE=INTEGER
ICOLLSEL:VALUE=-1
ICOLLSEL:ONBRUTALCHANGED^31={D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[1.0+D3],"BFITMP0","");BEHSEQPLAY^RUN("SEQPLAYER","WODA",2);IJAZDAWAVE^SET(1);}
ICOLLSEL:ONBRUTALCHANGED^-32={D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[0.5+D3],"BFITMP1","");IJAZDAWAVE^SET(0);}
ICOLLSEL:ONBRUTALCHANGED^2016={BEHSUCCESS^RUN();}
ICOLLSEL:ONBRUTALCHANGED={IJAZDAWAVE^SET(0);}

OBJECT=ICOLLSELLEB
ICOLLSELLEB:TYPE=INTEGER
ICOLLSELLEB:VALUE=-1
ICOLLSELLEB:ONBRUTALCHANGED^0={DKONMOVEX^SET(0.0);DKONMOVEY^SET(0.0);IKONANGLENEW^SET(IKONANGLE);DKONSPEED^SET(DKONSPEEDMIN);@IF(RANDOM^GET(100),"<","10","BFITMP2","");SFX_DOROZKA_UDE^PLAY();}
ICOLLSELLEB:ONBRUTALCHANGED^-32={S1^SET(CANVASOBSERVER^GETGRAPHICSAT([IKONNEWX+IPLANPOSX+D3],[IKONNEWY+IPLANPOSY+D4],TRUE,20,20,TRUE));@IF("S1","!_","NULL","BFITMP4","");}

OBJECT=ICOLLSELTULOW
ICOLLSELTULOW:TYPE=INTEGER
ICOLLSELTULOW:VALUE=-1
ICOLLSELTULOW:ONBRUTALCHANGED^0={IKONANGLENEW^SET(IKONANGLE);D1^SINUS(IKONANGLENEW);D2^COSINUS(IKONANGLENEW);DKONMOVEX^SET([D1*DKONSPEED]);DKONMOVEY^SET([D2*[0.0-DKONSPEED]]);IKONNEWX^SET([DKONPOSX+DKONMOVEX]);IKONNEWY^SET([DKONPOSY+DKONMOVEY]);@IF(RANDOM^GET(100),"<","10","BFITMP5","");}

OBJECT=ICOLLSELKOLASA
ICOLLSELKOLASA:TYPE=INTEGER
ICOLLSELKOLASA:VALUE=-1
ICOLLSELKOLASA:ONBRUTALCHANGED^0={DKONMOVEX^SET(0.0);DKONMOVEY^SET(0.0);DKONSPEED^SET(0.0);@IF(RANDOM^GET(100),"<","10","BFITMP6","");}
ICOLLSELKOLASA:ONBRUTALCHANGED^-32={S1^SET(CANVASOBSERVER^GETGRAPHICSAT([IKONNEWX+IPLANPOSX+D3],[IKONNEWY+IPLANPOSY+D4],TRUE,20,20,TRUE));@IF("S1","!_","NULL","BFITMP8","");}

OBJECT=ICOLLSELBOKI
ICOLLSELBOKI:TYPE=INTEGER
ICOLLSELBOKI:VALUE=-1
ICOLLSELBOKI:ONBRUTALCHANGED^-32={S1^SET(CANVASOBSERVER^GETGRAPHICSAT([IKONNEWX+IPLANPOSX+D3],[IKONNEWY+IPLANPOSY+D4],TRUE,20,20,TRUE));@IF("S1","!_","NULL","BFITMP12","");}}

OBJECT=ICZAS
ICZAS:TYPE=INTEGER
ICZAS:VALUE=0

OBJECT=ICZASMAX
ICZASMAX:TYPE=INTEGER
ICZASMAX:VALUE=3000

OBJECT=ICZASANGLE
ICZASANGLE:TYPE=INTEGER
ICZASANGLE:VALUE=-1
ICZASANGLE:ONCHANGED={@IF("ICZASANGLE>-1&&ICZASANGLE<21","BFITMP13","");}

OBJECT=_____
_____:TYPE=INTEGER

OBJECT=IPLANPOSX
IPLANPOSX:TYPE=INTEGER
IPLANPOSX:VALUE=0

OBJECT=IPLANPOSY
IPLANPOSY:TYPE=INTEGER
IPLANPOSY:VALUE=0

OBJECT=IPLANSIZEPXX
IPLANSIZEPXX:TYPE=INTEGER
IPLANSIZEPXX:VALUE=0

OBJECT=IPLANSIZEPXY
IPLANSIZEPXY:TYPE=INTEGER
IPLANSIZEPXY:VALUE=0

OBJECT=_____
_____:TYPE=INTEGER

OBJECT=DKONLEN
DKONLEN:TYPE=DOUBLE
DKONLEN:VALUE=0.0

OBJECT=DKONPOSX
DKONPOSX:TYPE=DOUBLE
DKONPOSX:VALUE=0.0

OBJECT=DKONPOSY
DKONPOSY:TYPE=DOUBLE
DKONPOSY:VALUE=0.0

OBJECT=DKONMOVEX
DKONMOVEX:TYPE=DOUBLE
DKONMOVEX:VALUE=0.0

OBJECT=DKONMOVEY
DKONMOVEY:TYPE=DOUBLE
DKONMOVEY:VALUE=0.0

OBJECT=DKONMOVEFORWX
DKONMOVEFORWX:TYPE=DOUBLE
DKONMOVEFORWX:VALUE=0.0

OBJECT=DKONMOVEFORWY
DKONMOVEFORWY:TYPE=DOUBLE
DKONMOVEFORWY:VALUE=0.0

OBJECT=IKONPOSX
IKONPOSX:TYPE=INTEGER
IKONPOSX:VALUE=0

OBJECT=IKONPOSY
IKONPOSY:TYPE=INTEGER
IKONPOSY:VALUE=0

OBJECT=IKONNEWX
IKONNEWX:TYPE=INTEGER
IKONNEWX:VALUE=0

OBJECT=IKONNEWY
IKONNEWY:TYPE=INTEGER
IKONNEWY:VALUE=0

OBJECT=IKONMOVEX
IKONMOVEX:TYPE=INTEGER
IKONMOVEX:VALUE=0

OBJECT=IKONMOVEY
IKONMOVEY:TYPE=INTEGER
IKONMOVEY:VALUE=0

OBJECT=DKONACCELERATION
DKONACCELERATION:TYPE=DOUBLE
DKONACCELERATION:VALUE=0.0

OBJECT=DKONSPEED
DKONSPEED:TYPE=DOUBLE
DKONSPEED:VALUE=0.0

OBJECT=DKONSPEEDMIN
DKONSPEEDMIN:TYPE=DOUBLE
DKONSPEEDMIN:VALUE=0.0

OBJECT=DKONSPEEDMAX
DKONSPEEDMAX:TYPE=DOUBLE
DKONSPEEDMAX:VALUE=0.0

OBJECT=IKONANGLE
IKONANGLE:TYPE=INTEGER
IKONANGLE:VALUE=0
IKONANGLE:ONCHANGED={FROTATE^UNLINK("ANNKON");FROTATE^SETPROPERTY("ANGLE",IKONANGLE);FROTATE^LINK("ANNKON");}

OBJECT=IKONANGLENEW
IKONANGLENEW:TYPE=INTEGER
IKONANGLENEW:VALUE=0

OBJECT=IKONANGLEADD
IKONANGLEADD:TYPE=INTEGER
IKONANGLEADD:VALUE=0

OBJECT=IKONFPS
IKONFPS:TYPE=INTEGER
IKONFPS:VALUE=1
IKONFPS:ONCHANGED={ANNKON^SETFPS([IKONFPS*8]);}

OBJECT=_____
_____:TYPE=INTEGER

OBJECT=DKOLASALEN
DKOLASALEN:TYPE=DOUBLE
DKOLASALEN:VALUE=0.0

OBJECT=DKOLASAHALFWIDTH
DKOLASAHALFWIDTH:TYPE=DOUBLE
DKOLASAHALFWIDTH:VALUE=0.0

OBJECT=IKOLASAANGLE
IKOLASAANGLE:TYPE=INTEGER
IKOLASAANGLE:VALUE=0
IKOLASAANGLE:ONCHANGED={FROTATE^UNLINK("ANNKOLASA");FROTATE^SETPROPERTY("ANGLE",IKOLASAANGLE);FROTATE^LINK("ANNKOLASA");}

OBJECT=_____
_____:TYPE=INTEGER

OBJECT=BLEFT
BLEFT:TYPE=BOOL
BLEFT:VALUE=FALSE
BLEFT:ONCHANGED^TRUE={IDIR^SET(-1);}
BLEFT:ONCHANGED^FALSE={@IF("BRIGHT","_","TRUE","BFITMP14","BFITMP15");}

OBJECT=BRIGHT
BRIGHT:TYPE=BOOL
BRIGHT:VALUE=FALSE
BRIGHT:ONCHANGED^TRUE={IDIR^SET(1);}
BRIGHT:ONCHANGED^FALSE={@IF("BLEFT","_","TRUE","BFITMP16","BFITMP17");}

OBJECT=IDIR
IDIR:TYPE=INTEGER
IDIR:VALUE=0

OBJECT=BSUCCESS
BSUCCESS:TYPE=BOOL
BSUCCESS:VALUE=FALSE

OBJECT=ANNKON
ANNKON:TYPE=ANIMO
ANNKON:VISIBLE=TRUE
ANNKON:FILENAME=KON.ANN
ANNKON:TOCANVAS=TRUE
ANNKON:PRIORITY=50
ANNKON:FPS=8
ANNKON:PRELOAD=TRUE
ANNKON:RELEASE=TRUE
ANNKON:MONITORCOLLISION=FALSE
ANNKON:MONITORCOLLISIONALPHA=FALSE
ANNKON:ONFRAMECHANGED={FROTATE^UNLINK("ANNKON");FROTATE^SETPROPERTY("ANGLE",IKONANGLE);FROTATE^LINK("ANNKON");}

OBJECT=ANNKOLASA
ANNKOLASA:TYPE=ANIMO
ANNKOLASA:VISIBLE=TRUE
ANNKOLASA:FILENAME=KOLASA.ANN
ANNKOLASA:TOCANVAS=TRUE
ANNKOLASA:PRIORITY=55
ANNKOLASA:FPS=16
ANNKOLASA:PRELOAD=TRUE
ANNKOLASA:RELEASE=TRUE
ANNKOLASA:MONITORCOLLISION=FALSE
ANNKOLASA:MONITORCOLLISIONALPHA=FALSE
ANNKOLASA:ONFRAMECHANGED={FROTATE^UNLINK("ANNKOLASA");FROTATE^SETPROPERTY("ANGLE",IKOLASAANGLE);FROTATE^LINK("ANNKOLASA");}

OBJECT=ANNRUNNERGAME
ANNRUNNERGAME:TYPE=ANIMO
ANNRUNNERGAME:VISIBLE=TRUE
ANNRUNNERGAME:FILENAME=RUNNER.ANN
ANNRUNNERGAME:TOCANVAS=TRUE
ANNRUNNERGAME:PRIORITY=0
ANNRUNNERGAME:FPS=32
ANNRUNNERGAME:PRELOAD=TRUE
ANNRUNNERGAME:RELEASE=TRUE
ANNRUNNERGAME:MONITORCOLLISION=FALSE
ANNRUNNERGAME:MONITORCOLLISIONALPHA=FALSE
ANNRUNNERGAME:ONFRAMECHANGED={@IF("IDIR","_","0","BFITMP18","BFITMP19");IKONANGLEADD^SET([[3.0*DKONSPEED]@DKONSPEEDMAX]);IKONANGLEADD^SET([5-IKONANGLEADD]);IKONFPS^SET([6-IKONANGLEADD]);@IF("DKONSPEED",">_","0.0","BFITMP20","");D1^SINUS(IKONANGLENEW);D2^COSINUS(IKONANGLENEW);DKONMOVEX^SET([D1*DKONSPEED]);DKONMOVEY^SET([D2*[0.0-DKONSPEED]]);IKONNEWX^SET([DKONPOSX+DKONMOVEX]);IKONNEWY^SET([DKONPOSY+DKONMOVEY]);@IF("DKONSPEED",">_","0.0","BFITMP21","BFITMP22");D1^COSINUS(IKOLASAANGLE);D2^SINUS(IKOLASAANGLE);D3^SET([D1*[0.0-DKOLASAHALFWIDTH]]);D4^SET([D2*[0.0-DKOLASAHALFWIDTH]]);ICOLLSELBOKI^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));D3^SET([D1*DKOLASAHALFWIDTH]);D4^SET([D2*DKOLASAHALFWIDTH]);ICOLLSELBOKI^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));ICOLLSEL^SET(IMGMASK^GETPIXEL(IKONNEWX,IKONNEWY));IKONANGLE^SET(IKONANGLENEW);I1^SET(IKOLASAANGLE);I1^CLAMP([IKONANGLE-30],[IKONANGLE+30]);I2^SET([IKONANGLE-IKOLASAANGLE]);I2^CLAMP(-2,2);IKOLASAANGLE^SET([I1+I2]);DKONPOSX^ADD(DKONMOVEX);DKONPOSY^ADD(DKONMOVEY);IKONMOVEX^SET([DKONPOSX-IKONPOSX]);IKONMOVEY^SET([DKONPOSY-IKONPOSY]);@IF("IKONMOVEX!'0||IKONMOVEY!'0","BFITMP23","");ICZAS^INC();}

OBJECT=ANNSKRZYNIA
ANNSKRZYNIA:TYPE=ANIMO
ANNSKRZYNIA:VISIBLE=TRUE
ANNSKRZYNIA:FILENAME=SKRZYNIE.ANN
ANNSKRZYNIA:TOCANVAS=TRUE
ANNSKRZYNIA:PRIORITY=20
ANNSKRZYNIA:FPS=16
ANNSKRZYNIA:PRELOAD=TRUE
ANNSKRZYNIA:RELEASE=TRUE
ANNSKRZYNIA:MONITORCOLLISION=FALSE
ANNSKRZYNIA:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSKRZYNIEPOS
ANNSKRZYNIEPOS:TYPE=ANIMO
ANNSKRZYNIEPOS:VISIBLE=FALSE
ANNSKRZYNIEPOS:FILENAME=SKRZYNIE_POS.ANN
ANNSKRZYNIEPOS:TOCANVAS=TRUE
ANNSKRZYNIEPOS:PRIORITY=0
ANNSKRZYNIEPOS:FPS=16
ANNSKRZYNIEPOS:PRELOAD=TRUE
ANNSKRZYNIEPOS:RELEASE=TRUE
ANNSKRZYNIEPOS:MONITORCOLLISION=FALSE
ANNSKRZYNIEPOS:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNSLAD
ANNSLAD:TYPE=ANIMO
ANNSLAD:VISIBLE=FALSE
ANNSLAD:FILENAME=SLAD.ANN
ANNSLAD:TOCANVAS=TRUE
ANNSLAD:PRIORITY=0
ANNSLAD:FPS=16
ANNSLAD:PRELOAD=TRUE
ANNSLAD:RELEASE=TRUE
ANNSLAD:MONITORCOLLISION=FALSE
ANNSLAD:MONITORCOLLISIONALPHA=FALSE

OBJECT=ANNBUM
ANNBUM:TYPE=ANIMO
ANNBUM:VISIBLE=FALSE
ANNBUM:FILENAME=BUM.ANN
ANNBUM:TOCANVAS=TRUE
ANNBUM:PRIORITY=0
ANNBUM:FPS=16
ANNBUM:PRELOAD=TRUE
ANNBUM:RELEASE=TRUE
ANNBUM:MONITORCOLLISION=FALSE
ANNBUM:MONITORCOLLISIONALPHA=FALSE
ANNBUM:ONFINISHED^BUM={I1^SET(ANNBUM^GETPOSITIONX(TRUE));I2^SET(ANNBUM^GETPOSITIONY(TRUE));CANVASOBSERVER^PASTE("ANNBUM",[I1-IPLANPOSX],[I2-IPLANPOSY]);ANNBUM^HIDE();}

OBJECT=ANNWSKAZOWKA
ANNWSKAZOWKA:TYPE=ANIMO
ANNWSKAZOWKA:VISIBLE=FALSE
ANNWSKAZOWKA:FILENAME=WSKAZOWKA.ANN
ANNWSKAZOWKA:TOCANVAS=TRUE
ANNWSKAZOWKA:PRIORITY=71
ANNWSKAZOWKA:FPS=16
ANNWSKAZOWKA:PRELOAD=TRUE
ANNWSKAZOWKA:RELEASE=TRUE
ANNWSKAZOWKA:MONITORCOLLISION=FALSE
ANNWSKAZOWKA:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGMASK
IMGMASK:TYPE=IMAGE
IMGMASK:VISIBLE=FALSE
IMGMASK:FILENAME=MASK.IMG
IMGMASK:TOCANVAS=TRUE
IMGMASK:PRIORITY=0
IMGMASK:PRELOAD=TRUE
IMGMASK:RELEASE=TRUE
IMGMASK:MONITORCOLLISION=FALSE
IMGMASK:MONITORCOLLISIONALPHA=FALSE

OBJECT=IMGZEGAR
IMGZEGAR:TYPE=IMAGE
IMGZEGAR:VISIBLE=FALSE
IMGZEGAR:FILENAME=ZEGAR.IMG
IMGZEGAR:TOCANVAS=TRUE
IMGZEGAR:PRIORITY=70
IMGZEGAR:PRELOAD=TRUE
IMGZEGAR:RELEASE=TRUE
IMGZEGAR:MONITORCOLLISION=FALSE
IMGZEGAR:MONITORCOLLISIONALPHA=FALSE

OBJECT=SEQPLAYER
SEQPLAYER:TYPE=SEQUENCE
SEQPLAYER:FILENAME=SEPLAYER.SEQ
SEQPLAYER:ONFINISHED^WSTEP={GSAVE^SET("DOROZKA_STATUS","ODWIEDZONY");ISEQPRIORITY^SET(-1);ANNKON^PLAY("PLAY");ANNKOLASA^PLAY("PLAY");ANNRUNNERGAME^PLAY("RUN");KEYBOARD^ENABLE();SFX_DOROZKA_JAZDA^PLAY();}
SEQPLAYER:ONFINISHED^KONIEC_CZASU={ISEQPRIORITY^SET(100);BEHGOTOSCENE^RUN();}
SEQPLAYER:ONFINISHED={ISEQPRIORITY^SET(-1);}

OBJECT=GTRASA
GTRASA:TYPE=GROUP

OBJECT=SFX_DOROZKA_UDE
SFX_DOROZKA_UDE:TYPE=SOUND
SFX_DOROZKA_UDE:FILENAME=SFX_DOROZKA_UDE.WAV
SFX_DOROZKA_UDE:PRELOAD=TRUE
SFX_DOROZKA_UDE:FLUSHAFTERPLAYED=FALSE

OBJECT=SFX_DOROZKA_BLOK
SFX_DOROZKA_BLOK:TYPE=SOUND
SFX_DOROZKA_BLOK:FILENAME=SFX_DOROZKA_BLOK.WAV
SFX_DOROZKA_BLOK:PRELOAD=TRUE
SFX_DOROZKA_BLOK:FLUSHAFTERPLAYED=FALSE

OBJECT=SFX_DOROZKA_BLOTO
SFX_DOROZKA_BLOTO:TYPE=SOUND
SFX_DOROZKA_BLOTO:FILENAME=SFX_DOROZKA_BLOTO.WAV
SFX_DOROZKA_BLOTO:PRELOAD=TRUE
SFX_DOROZKA_BLOTO:FLUSHAFTERPLAYED=FALSE
SFX_DOROZKA_BLOTO:ONFINISHED={SFX_DOROZKA_BLOTO^PLAY();}

OBJECT=SFX_DOROZKA_CRASH
SFX_DOROZKA_CRASH:TYPE=SOUND
SFX_DOROZKA_CRASH:FILENAME=SFX_DOROZKA_CRASH.WAV
SFX_DOROZKA_CRASH:PRELOAD=TRUE
SFX_DOROZKA_CRASH:FLUSHAFTERPLAYED=FALSE

OBJECT=SFX_DOROZKA_CUT
SFX_DOROZKA_CUT:TYPE=SOUND
SFX_DOROZKA_CUT:FILENAME=SFX_DOROZKA_CUT.WAV
SFX_DOROZKA_CUT:PRELOAD=TRUE
SFX_DOROZKA_CUT:FLUSHAFTERPLAYED=FALSE

OBJECT=SFX_DOROZKA_JAZDA
SFX_DOROZKA_JAZDA:TYPE=SOUND
SFX_DOROZKA_JAZDA:FILENAME=SFX_DOROZKA_JAZDA.WAV
SFX_DOROZKA_JAZDA:PRELOAD=TRUE
SFX_DOROZKA_JAZDA:FLUSHAFTERPLAYED=FALSE
SFX_DOROZKA_JAZDA:ONFINISHED={SFX_DOROZKA_JAZDA^PLAY();}

OBJECT=SFX_DOROZKA_ODJA
SFX_DOROZKA_ODJA:TYPE=SOUND
SFX_DOROZKA_ODJA:FILENAME=SFX_DOROZKA_ODJA.WAV
SFX_DOROZKA_ODJA:PRELOAD=TRUE
SFX_DOROZKA_ODJA:FLUSHAFTERPLAYED=FALSE

OBJECT=MOUSE
MOUSE:TYPE=MOUSE
MOUSE:RAW=0

OBJECT=CNVLOADER
CNVLOADER:TYPE=CNVLOADER

OBJECT=CANVASOBSERVER
CANVASOBSERVER:TYPE=CANVAS_OBSERVER

OBJECT=FROTATE
FROTATE:TYPE=STATICFILTER
FROTATE:ACTION=ROTATE

OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD
KEYBOARD:ONKEYDOWN^LEFT={BLEFT^SET(TRUE);@IF(RANDOM^GET(100),"<","33","BFITMP24","");}
KEYBOARD:ONKEYDOWN^RIGHT={BRIGHT^SET(TRUE);@IF(RANDOM^GET(100),"<","33","BFITMP25","");}
KEYBOARD:ONKEYUP^LEFT={BLEFT^SET(FALSE);}
KEYBOARD:ONKEYUP^RIGHT={BRIGHT^SET(FALSE);}
KEYBOARD:ONKEYUP^SPACE={@IF("SGAMEDIFFICULTY","_",""CHEAT"","BFITMP29","");}

OBJECT=__INIT__
__INIT__:TYPE=BEHAVIOUR
__INIT__:CODE={ANNKEYBMOUSEHELP^PLAY("LP");BEHMUSICSET^RUN("DOROZKA");BEHAMBIENTSNDPLAY^RUN("SFX_DOROZKA_BRG");SLEVELSEL^SET(["1"+SGAMEDIFFICULTY]);FROTATE^SETPROPERTY("CANUNDO","TRUE");@IF(GSAVE^GET("DOROZKA_STATUS"),"_",""NIEODWIEDZONY"","BFITMP30","BFITMP31");}


OBJECT=BEHINITSKRZYNIE
BEHINITSKRZYNIE:TYPE=BEHAVIOUR
BEHINITSKRZYNIE:CODE={@INT("ITMPCLONENO",0);I2^SET(ANNSKRZYNIEPOS^GETNOE());I1^SET(0);@WHILE("I1","<","I2","{S1^SET(["TYPE"+I1]);I3^SET(ANNSKRZYNIEPOS^GETNOFINEVENT(S1));ANNSKRZYNIA^CLONE(I3);@LOOP("{ANNSKRZYNIEPOS^SETFRAME(S1,_I_);ITMPCLONENO^INC();S2^SET(["ANNSKRZYNIA_"+ITMPCLONENO]);*S2^SETFRAME(S1,0);*S2^SETPOSITION(ANNSKRZYNIEPOS^GETPOSITIONX(),ANNSKRZYNIEPOS^GETPOSITIONY());}",0,I3,1);I1^INC();}");GTRASA^ADDCLONES("ANNSKRZYNIA",1,ITMPCLONENO);ANNSKRZYNIA^SETPOSITION(-200,-200);ANNSKRZYNIA^HIDE();}


OBJECT=BEHSUCCESS
BEHSUCCESS:TYPE=BEHAVIOUR
BEHSUCCESS:CODE={@IF("BSUCCESS","_","FALSE","BFITMP32","");}


OBJECT=_____
_____:TYPE=BEHAVIOUR
_____:CODE={}


OBJECT=BEHMOVEALLTOKON
BEHMOVEALLTOKON:TYPE=BEHAVIOUR
BEHMOVEALLTOKON:CODE={@INT("ICENTERX",[400-IPLANPOSX]);@INT("ICENTERY",[300-IPLANPOSY]);@INT("IDELTAX",[ICENTERX-IKONPOSX]);@INT("IDELTAY",[ICENTERY-IKONPOSY]);@IF([IPLANPOSX+IDELTAX],">","0","BFITMP33","");@IF([IPLANPOSX+IDELTAX],"<",[800-IPLANSIZEPXX],"BFITMP34","");@IF([IPLANPOSY+IDELTAY],">","0","BFITMP35","");@IF([IPLANPOSY+IDELTAY],"<",[600-IPLANSIZEPXY],"BFITMP36","");@IF("IDELTAX!'0||IDELTAY!'0","BFITMP37","");}


OBJECT=BEHELAPSEGFX
BEHELAPSEGFX:TYPE=BEHAVIOUR
BEHELAPSEGFX:CODE={@INT("ICENTERX",[400-IPLANPOSX]);@INT("ICENTERY",[300-IPLANPOSY]);@INT("IDELTAX",[ICENTERX-IKONPOSX]);@INT("IDELTAY",[ICENTERY-IKONPOSY]);@IF("IDELTAX","!_","0","BFITMP40","");@IF("IDELTAY","!_","0","BFITMP43","");@IF("IDELTAX!'0||IDELTAY!'0","BFITMP44","");I1^SET([IDELTAX+IKONMOVEX]);I2^SET([IDELTAY+IKONMOVEY]);ANNKON^MOVE(I1,I2);ANNKOLASA^MOVE(I1,I2);}


OBJECT=BEHCZAS
BEHCZAS:TYPE=BEHAVIOUR
BEHCZAS:CODE={@IF("ICZAS","_","ICZASMAX","BFITMP46","");ICZASANGLE^SET([[20*ICZAS]@ICZASMAX]);}


OBJECT=_____
_____:TYPE=BEHAVIOUR
_____:CODE={}


OBJECT=BEHSEQPLAY
BEHSEQPLAY:TYPE=BEHAVIOUR
BEHSEQPLAY:CODE={@STRING("STMPSEQNAME",$1);@STRING("STMPSEQEVENT",$2);@INT("ITMPSEQPRIORITY",$3);@IF("STMPSEQNAME!'SSEQNAME||SSEQEVENT!'STMPSEQEVENT","BFITMP48","");}


OBJECT=BEHSEQSTOP
BEHSEQSTOP:TYPE=BEHAVIOUR
BEHSEQSTOP:CODE={@STRING("STMPSEQNAME",$1);@STRING("STMPSEQSIGNAL",$2);@IF("STMPSEQSIGNAL","_","TRUE","BFITMP49","BFITMP50");ISEQPRIORITY^SET(-1);}


OBJECT=BFITMP0
BFITMP0:TYPE=BEHAVIOUR
BFITMP0:CODE={DKONSPEED^SUB(D3);}


OBJECT=BFITMP1
BFITMP1:TYPE=BEHAVIOUR
BFITMP1:CODE={DKONSPEED^SUB(D3);}


OBJECT=BFITMP2
BFITMP2:TYPE=BEHAVIOUR
BFITMP2:CODE={BEHSEQPLAY^RUN("SEQPLAYER","SCIANA",1);}


OBJECT=BFITMP3
BFITMP3:TYPE=BEHAVIOUR
BFITMP3:CODE={DKONSPEED^DIV(6.0);S2^SET(*S1^GETEVENTNAME());*S1^PLAY(S2);*S1^SETFRAME(S2,1);BEHSEQPLAY^RUN("SEQPLAYER","SKRZYNIA",2);SFX_DOROZKA_CRASH^PLAY();}


OBJECT=BFITMP4
BFITMP4:TYPE=BEHAVIOUR
BFITMP4:CODE={@IF(*S1^GETCFRAMEINEVENT(),"_","0","BFITMP3","");}


OBJECT=BFITMP5
BFITMP5:TYPE=BEHAVIOUR
BFITMP5:CODE={BEHSEQPLAY^RUN("SEQPLAYER","SCIANA",1);}


OBJECT=BFITMP6
BFITMP6:TYPE=BEHAVIOUR
BFITMP6:CODE={BEHSEQPLAY^RUN("SEQPLAYER","SCIANA",1);}


OBJECT=BFITMP7
BFITMP7:TYPE=BEHAVIOUR
BFITMP7:CODE={DKONSPEED^DIV(6.0);S2^SET(*S1^GETEVENTNAME());*S1^PLAY(S2);*S1^SETFRAME(S2,1);BEHSEQPLAY^RUN("SEQPLAYER","SKRZYNIA",2);SFX_DOROZKA_CRASH^PLAY();}


OBJECT=BFITMP8
BFITMP8:TYPE=BEHAVIOUR
BFITMP8:CODE={@IF(*S1^GETCFRAMEINEVENT(),"_","0","BFITMP7","");}


OBJECT=BFITMP9
BFITMP9:TYPE=BEHAVIOUR
BFITMP9:CODE={DKONSPEED^SUB(D3);}


OBJECT=BFITMP10
BFITMP10:TYPE=BEHAVIOUR
BFITMP10:CODE={DKONSPEED^DIV(6.0);S2^SET(*S1^GETEVENTNAME());*S1^PLAY(S2);*S1^SETFRAME(S2,1);BEHSEQPLAY^RUN("SEQPLAYER","SKRZYNIA",2);SFX_DOROZKA_CRASH^PLAY();}


OBJECT=BFITMP11
BFITMP11:TYPE=BEHAVIOUR
BFITMP11:CODE={D3^SET([DKONSPEED@DKONSPEEDMAX]);@IF("DKONSPEED",">",[0.5+D3],"BFITMP9","");}


OBJECT=BFITMP12
BFITMP12:TYPE=BEHAVIOUR
BFITMP12:CODE={@IF(*S1^GETCFRAMEINEVENT(),"_","0","BFITMP10","BFITMP11");}


OBJECT=BFITMP13
BFITMP13:TYPE=BEHAVIOUR
BFITMP13:CODE={ANNWSKAZOWKA^SETFRAME("IDLE",ICZASANGLE);}


OBJECT=BFITMP14
BFITMP14:TYPE=BEHAVIOUR
BFITMP14:CODE={IDIR^SET(1);}


OBJECT=BFITMP15
BFITMP15:TYPE=BEHAVIOUR
BFITMP15:CODE={IDIR^SET(0);}


OBJECT=BFITMP16
BFITMP16:TYPE=BEHAVIOUR
BFITMP16:CODE={IDIR^SET(-1);}


OBJECT=BFITMP17
BFITMP17:TYPE=BEHAVIOUR
BFITMP17:CODE={IDIR^SET(0);}


OBJECT=BFITMP18
BFITMP18:TYPE=BEHAVIOUR
BFITMP18:CODE={D3^SET([[DKONSPEEDMAX-DKONSPEED]*2.0]);D3^SET([2.5-[D3@DKONSPEEDMAX]]);D3^CLAMP(0.5,2.5);DKONSPEED^ADD([DKONACCELERATION*D3]);DKONSPEED^CLAMP(DKONSPEEDMIN,DKONSPEEDMAX);}


OBJECT=BFITMP19
BFITMP19:TYPE=BEHAVIOUR
BFITMP19:CODE={D3^SET([[DKONSPEEDMAX-DKONSPEED]*2.0]);D3^SET([3.0-[D3@DKONSPEEDMAX]]);D3^CLAMP(0.5,2.5);DKONSPEED^SUB([DKONACCELERATION*D3]);DKONSPEED^CLAMP(0.0,DKONSPEEDMAX);}


OBJECT=BFITMP20
BFITMP20:TYPE=BEHAVIOUR
BFITMP20:CODE={IKONANGLENEW^SET([IKONANGLE+[IKONANGLEADD*IDIR]]);}


OBJECT=BFITMP21
BFITMP21:TYPE=BEHAVIOUR
BFITMP21:CODE={D3^SET([D1*DKONLEN]);D4^SET([D2*[0.0-DKONLEN]]);ICOLLSELLEB^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));ICOLLSELTULOW^SET(IMGMASK^GETPIXEL([IKONNEWX+[D3@2.0]],[IKONNEWY+[D4@2.0]]));}


OBJECT=BFITMP22
BFITMP22:TYPE=BEHAVIOUR
BFITMP22:CODE={D3^SINUS(IKOLASAANGLE);D4^COSINUS(IKOLASAANGLE);D3^MUL([0.0-DKOLASALEN]);D4^MUL(DKOLASALEN);ICOLLSELKOLASA^SET(IMGMASK^GETPIXEL([IKONNEWX+D3],[IKONNEWY+D4]));}


OBJECT=BFITMP23
BFITMP23:TYPE=BEHAVIOUR
BFITMP23:CODE={IKONPOSX^ADD(IKONMOVEX);IKONPOSY^ADD(IKONMOVEY);BEHELAPSEGFX^RUN();}


OBJECT=BFITMP24
BFITMP24:TYPE=BEHAVIOUR
BFITMP24:CODE={BEHSEQPLAY^RUN("SEQPLAYER","LEWO",1);}


OBJECT=BFITMP25
BFITMP25:TYPE=BEHAVIOUR
BFITMP25:CODE={BEHSEQPLAY^RUN("SEQPLAYER","PRAWO",1);}


OBJECT=BFITMP26
BFITMP26:TYPE=BEHAVIOUR
BFITMP26:CODE={S2^SET(*S1^GETEVENTNAME());*S1^PLAY(S2);*S1^SETFRAME(S2,1);}


OBJECT=BFITMP27
BFITMP27:TYPE=BEHAVIOUR
BFITMP27:CODE={@IF(*S1^GETCFRAMEINEVENT(),"_","0","BFITMP26","");}


OBJECT=BFITMP28
BFITMP28:TYPE=BEHAVIOUR
BFITMP28:CODE={D1^SINUS(IKONANGLE);D2^COSINUS(IKONANGLE);D3^SET([D1*200.0]);D4^SET([D2*[0.0-200.0]]);ANNBUM^SETPOSITION([IKONPOSX+IPLANPOSX+D3],[IKONPOSY+IPLANPOSY+D4]);ANNBUM^PLAY("BUM");S1^SET(CANVASOBSERVER^GETGRAPHICSAT([IKONPOSX+IPLANPOSX+D3],[IKONPOSY+IPLANPOSY+D4],TRUE,20,20,TRUE));@IF("S1","!_","NULL","BFITMP27","");}


OBJECT=BFITMP29
BFITMP29:TYPE=BEHAVIOUR
BFITMP29:CODE={@IF(ANNBUM^ISPLAYING(),"_","FALSE","BFITMP28","");}


OBJECT=BFITMP30
BFITMP30:TYPE=BEHAVIOUR
BFITMP30:CODE={KEYBOARD^DISABLE();BEHSEQPLAY^RUN("SEQPLAYER","WSTEP",5);}


OBJECT=BFITMP31
BFITMP31:TYPE=BEHAVIOUR
BFITMP31:CODE={ANNKON^PLAY("PLAY");ANNKOLASA^PLAY("PLAY");ANNRUNNERGAME^PLAY("RUN");SFX_DOROZKA_JAZDA^PLAY();}


OBJECT=BFITMP32
BFITMP32:TYPE=BEHAVIOUR
BFITMP32:CODE={BSUCCESS^SET(TRUE);GSAVE^SET("DOROZKA_STATUS","UKONCZONY");GSAVE^SET("SCENE_CODE","CDOR");GSAVE^SET("SCENE_NAME","CUTSCENKI");GSAVE^SET("CS_SCENE_NAME","06_DOROZKA");BEHGOTOSCENE^RUN();}


OBJECT=BFITMP33
BFITMP33:TYPE=BEHAVIOUR
BFITMP33:CODE={IDELTAX^SET([0-IPLANPOSX]);}


OBJECT=BFITMP34
BFITMP34:TYPE=BEHAVIOUR
BFITMP34:CODE={IDELTAX^SET([[800-IPLANSIZEPXX]-IPLANPOSX]);}


OBJECT=BFITMP35
BFITMP35:TYPE=BEHAVIOUR
BFITMP35:CODE={IDELTAY^SET([0-IPLANPOSY]);}


OBJECT=BFITMP36
BFITMP36:TYPE=BEHAVIOUR
BFITMP36:CODE={IDELTAY^SET([[600-IPLANSIZEPXY]-IPLANPOSY]);}


OBJECT=BFITMP37
BFITMP37:TYPE=BEHAVIOUR
BFITMP37:CODE={IPLANPOSX^ADD(IDELTAX);IPLANPOSY^ADD(IDELTAY);CANVASOBSERVER^MOVEBKG([0-IDELTAX],[0-IDELTAY]);GTRASA^MOVE(IDELTAX,IDELTAY);ANNKON^MOVE(IDELTAX,IDELTAY);ANNKOLASA^MOVE(IDELTAX,IDELTAY);}


OBJECT=BFITMP38
BFITMP38:TYPE=BEHAVIOUR
BFITMP38:CODE={IDELTAX^SET([0-IPLANPOSX]);}


OBJECT=BFITMP39
BFITMP39:TYPE=BEHAVIOUR
BFITMP39:CODE={IDELTAX^SET([[800-IPLANSIZEPXX]-IPLANPOSX]);}


OBJECT=BFITMP40
BFITMP40:TYPE=BEHAVIOUR
BFITMP40:CODE={@IF([IPLANPOSX+IDELTAX],">","0","BFITMP38","");@IF([IPLANPOSX+IDELTAX],"<",[800-IPLANSIZEPXX],"BFITMP39","");}


OBJECT=BFITMP41
BFITMP41:TYPE=BEHAVIOUR
BFITMP41:CODE={IDELTAY^SET([0-IPLANPOSY]);}


OBJECT=BFITMP42
BFITMP42:TYPE=BEHAVIOUR
BFITMP42:CODE={IDELTAY^SET([[600-IPLANSIZEPXY]-IPLANPOSY]);}


OBJECT=BFITMP43
BFITMP43:TYPE=BEHAVIOUR
BFITMP43:CODE={@IF([IPLANPOSY+IDELTAY],">","0","BFITMP41","");@IF([IPLANPOSY+IDELTAY],"<",[600-IPLANSIZEPXY],"BFITMP42","");}


OBJECT=BFITMP44
BFITMP44:TYPE=BEHAVIOUR
BFITMP44:CODE={IPLANPOSX^ADD(IDELTAX);IPLANPOSY^ADD(IDELTAY);CANVASOBSERVER^MOVEBKG([0-IDELTAX],[0-IDELTAY]);GTRASA^MOVE(IDELTAX,IDELTAY);}


OBJECT=BFITMP45
BFITMP45:TYPE=BEHAVIOUR
BFITMP45:CODE={BSUCCESS^SET(TRUE);BEHSEQPLAY^RUN("SEQPLAYER","KONIEC_CZASU",10);SFX_DOROZKA_ODJA^PLAY();}


OBJECT=BFITMP46
BFITMP46:TYPE=BEHAVIOUR
BFITMP46:CODE={@IF("BSUCCESS","_","FALSE","BFITMP45","");}


OBJECT=BFITMP47
BFITMP47:TYPE=BEHAVIOUR
BFITMP47:CODE={SEQPLAYER^STOP(FALSE);ISEQPRIORITY^SET(ITMPSEQPRIORITY);SSEQNAME^SET(STMPSEQNAME);SSEQEVENT^SET(STMPSEQEVENT);*STMPSEQNAME^PLAY(STMPSEQEVENT);}


OBJECT=BFITMP48
BFITMP48:TYPE=BEHAVIOUR
BFITMP48:CODE={@IF("ITMPSEQPRIORITY",">_","ISEQPRIORITY","BFITMP47","");}


OBJECT=BFITMP49
BFITMP49:TYPE=BEHAVIOUR
BFITMP49:CODE={*STMPSEQNAME^STOP(TRUE);}


OBJECT=BFITMP50
BFITMP50:TYPE=BEHAVIOUR
BFITMP50:CODE={*STMPSEQNAME^STOP(FALSE);}


