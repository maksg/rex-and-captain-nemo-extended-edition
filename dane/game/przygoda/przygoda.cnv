OBJECT=SGAMEDIFFICULTY
SGAMEDIFFICULTY:TYPE=STRING
SGAMEDIFFICULTY:VALUE=NORMAL

OBJECT=IGSLOTNO
IGSLOTNO:TYPE=INTEGER
IGSLOTNO:VALUE=0

OBJECT=SGSLOTNAME
SGSLOTNAME:TYPE=STRING
SGSLOTNAME:VALUE=0
SGSLOTNAME:ONCHANGED^0={IGSLOTNO^SET(0);}
SGSLOTNAME:ONCHANGED^1={IGSLOTNO^SET(1);}
SGSLOTNAME:ONCHANGED^2={IGSLOTNO^SET(2);}
SGSLOTNAME:ONCHANGED^3={IGSLOTNO^SET(3);}

OBJECT=SGSCENENAME
SGSCENENAME:TYPE=STRING

OBJECT=SGZAJEZDNIASCENECODELAST
SGZAJEZDNIASCENECODELAST:TYPE=STRING

OBJECT=IGMUSICVOLUME
IGMUSICVOLUME:TYPE=INTEGER
IGMUSICVOLUME:VALUE=700
IGMUSICVOLUME:ONBRUTALCHANGED={@INT("ITMPMV",[IGMUSICVOLUME+IGMUSICVOLUMEFIX]);ITMPMV^CLAMP(0,800);*SGSCENENAME^SETMUSICVOLUME(ITMPMV);}

OBJECT=IGMUSICVOLUMEFIX
IGMUSICVOLUMEFIX:TYPE=INTEGER
IGMUSICVOLUMEFIX:VALUE=0

OBJECT=SGAMBIENTSNDNAME
SGAMBIENTSNDNAME:TYPE=STRING

OBJECT=IGMOUSEX
IGMOUSEX:TYPE=INTEGER
IGMOUSEX:VALUE=0

OBJECT=IGMOUSEY
IGMOUSEY:TYPE=INTEGER
IGMOUSEY:VALUE=0

OBJECT=IGMOUSELASTX
IGMOUSELASTX:TYPE=INTEGER
IGMOUSELASTX:VALUE=0

OBJECT=IGMOUSELASTY
IGMOUSELASTY:TYPE=INTEGER
IGMOUSELASTY:VALUE=0

OBJECT=BGMOUSEONMOVEENABLED
BGMOUSEONMOVEENABLED:TYPE=BOOL
BGMOUSEONMOVEENABLED:VALUE=TRUE

OBJECT=BGKEYBOARDENABLED
BGKEYBOARDENABLED:TYPE=BOOL
BGKEYBOARDENABLED:VALUE=TRUE

OBJECT=ANNFADE
ANNFADE:TYPE=ANIMO
ANNFADE:VISIBLE=TRUE
ANNFADE:FILENAME=G_FADE.ANN
ANNFADE:TOCANVAS=TRUE
ANNFADE:PRIORITY=40000
ANNFADE:FPS=32
ANNFADE:PRELOAD=TRUE
ANNFADE:RELEASE=TRUE
ANNFADE:MONITORCOLLISION=FALSE
ANNFADE:MONITORCOLLISIONALPHA=FALSE
ANNFADE:ONFINISHED^CLOSE={ANNFADE^PLAY("OPEN");BTNNULLFADE^DISABLE();@IF("BGKEYBOARDENABLED","_","TRUE","BFITMP0","");PPMENU^OPCJE_ENABLE();CURSOR^SET("STD");SGSCENENAME^SET(GSAVE^GET("SCENE_NAME"));PRZYGODA^GOTO(SGSCENENAME);}

OBJECT=ANNKEYBMOUSEHELP
ANNKEYBMOUSEHELP:TYPE=ANIMO
ANNKEYBMOUSEHELP:VISIBLE=TRUE
ANNKEYBMOUSEHELP:FILENAME=$COMMON\HELP_KEYB_MOUSE.ANN
ANNKEYBMOUSEHELP:TOCANVAS=TRUE
ANNKEYBMOUSEHELP:PRIORITY=45000
ANNKEYBMOUSEHELP:FPS=16
ANNKEYBMOUSEHELP:PRELOAD=TRUE
ANNKEYBMOUSEHELP:RELEASE=TRUE
ANNKEYBMOUSEHELP:MONITORCOLLISION=FALSE
ANNKEYBMOUSEHELP:MONITORCOLLISIONALPHA=FALSE

OBJECT=BTNNULLFADE
BTNNULLFADE:TYPE=BUTTON
BTNNULLFADE:VISIBLE=TRUE
BTNNULLFADE:RECT=0,0,800,600
BTNNULLFADE:ENABLE=FALSE
BTNNULLFADE:DRAGGABLE=FALSE

OBJECT=TMUSICSTOP
TMUSICSTOP:TYPE=TIMER
TMUSICSTOP:ENABLED=FALSE
TMUSICSTOP:ELAPSE=10
TMUSICSTOP:TICKS=1
TMUSICSTOP:ONTICK={*SGSCENENAME^STOPMUSIC();}

OBJECT=SNDGAMBIENTSND
SNDGAMBIENTSND:TYPE=SOUND
SNDGAMBIENTSND:FILENAME=_NULL_AMBIENT_SND.WAV
SNDGAMBIENTSND:PRELOAD=FALSE
SNDGAMBIENTSND:FLUSHAFTERPLAYED=FALSE
SNDGAMBIENTSND:ONFINISHED={SNDGAMBIENTSND^PLAY();}

OBJECT=SNDGSFX0
SNDGSFX0:TYPE=SOUND
SNDGSFX0:FILENAME=_PUSTY_SFX0.WAV
SNDGSFX0:PRELOAD=FALSE
SNDGSFX0:FLUSHAFTERPLAYED=FALSE
SNDGSFX0:ONFINISHED={ARRFREESFX^CHANGEAT(0,"");}

OBJECT=SNDGSFX1
SNDGSFX1:TYPE=SOUND
SNDGSFX1:FILENAME=_PUSTY_SFX1.WAV
SNDGSFX1:PRELOAD=FALSE
SNDGSFX1:FLUSHAFTERPLAYED=FALSE
SNDGSFX1:ONFINISHED={ARRFREESFX^CHANGEAT(1,"");}

OBJECT=SNDGSFX2
SNDGSFX2:TYPE=SOUND
SNDGSFX2:FILENAME=_PUSTY_SFX2.WAV
SNDGSFX2:PRELOAD=FALSE
SNDGSFX2:FLUSHAFTERPLAYED=FALSE
SNDGSFX2:ONFINISHED={ARRFREESFX^CHANGEAT(2,"");}

OBJECT=SNDGSFX3
SNDGSFX3:TYPE=SOUND
SNDGSFX3:FILENAME=_PUSTY_SFX3.WAV
SNDGSFX3:PRELOAD=FALSE
SNDGSFX3:FLUSHAFTERPLAYED=FALSE
SNDGSFX3:ONFINISHED={ARRFREESFX^CHANGEAT(3,"");}

OBJECT=SNDGSFX4
SNDGSFX4:TYPE=SOUND
SNDGSFX4:FILENAME=_PUSTY_SFX4.WAV
SNDGSFX4:PRELOAD=FALSE
SNDGSFX4:FLUSHAFTERPLAYED=FALSE
SNDGSFX4:ONFINISHED={ARRFREESFX^CHANGEAT(4,"");}

OBJECT=SFXMENUON
SFXMENUON:TYPE=SOUND
SFXMENUON:FILENAME=SFX_BUTON_M0N.WAV
SFXMENUON:PRELOAD=FALSE
SFXMENUON:FLUSHAFTERPLAYED=FALSE

OBJECT=SFXMENUCLICK
SFXMENUCLICK:TYPE=SOUND
SFXMENUCLICK:FILENAME=SFX_BUTON_MCLIK.WAV
SFXMENUCLICK:PRELOAD=FALSE
SFXMENUCLICK:FLUSHAFTERPLAYED=FALSE

OBJECT=ARRFREESFX
ARRFREESFX:TYPE=ARRAY

OBJECT=MOUSE
MOUSE:TYPE=MOUSE
MOUSE:RAW=
MOUSE:ONMOVE={IGMOUSEX^SET(MOUSE^GETPOSX());IGMOUSEY^SET(MOUSE^GETPOSY());CURSOR^MOVE([IGMOUSEX-IGMOUSELASTX],[IGMOUSEY-IGMOUSELASTY]);IGMOUSELASTX^SET(IGMOUSEX);IGMOUSELASTY^SET(IGMOUSEY);}

OBJECT=KEYBOARD
KEYBOARD:TYPE=KEYBOARD

OBJECT=CNVLOADER
CNVLOADER:TYPE=CNVLOADER

OBJECT=CANVASOBSERVER
CANVASOBSERVER:TYPE=CANVAS_OBSERVER

OBJECT=CLSLOGOBJ
CLSLOGOBJ:TYPE=CLASS
CLSLOGOBJ:DEF=CLSLOG.CLASS
CLSLOGOBJ:BASE=

OBJECT=CLSPOPUPOBJ
CLSPOPUPOBJ:TYPE=CLASS
CLSPOPUPOBJ:DEF=CLSPOPUP.CLASS
CLSPOPUPOBJ:BASE=

OBJECT=CLSSAVEOBJ
CLSSAVEOBJ:TYPE=CLASS
CLSSAVEOBJ:DEF=CLSSAVE.CLASS
CLSSAVEOBJ:BASE=

OBJECT=CLSCURSOROBJ
CLSCURSOROBJ:TYPE=CLASS
CLSCURSOROBJ:DEF=CLSCURSOR.CLASS
CLSCURSOROBJ:BASE=

OBJECT=__PRZYGODA_INIT__
__PRZYGODA_INIT__:TYPE=BEHAVIOUR
__PRZYGODA_INIT__:CODE={KEYBOARD^SETAUTOREPEAT(FALSE);BTNNULLFADE^SETPRIORITY(40000);CLSLOGOBJ^NEW("LOG",FALSE);CLSPOPUPOBJ^NEW("PPMENU");CLSCURSOROBJ^NEW("CURSOR");CLSSAVEOBJ^NEW("GSAVE");ARRFREESFX^ADD("","","","","");}


OBJECT=_______________
_______________:TYPE=BEHAVIOUR
_______________:CODE={}


OBJECT=BEHGOTOSCENE
BEHGOTOSCENE:TYPE=BEHAVIOUR
BEHGOTOSCENE:CODE={BEHAMBIENTSNDSTOP^RUN();@IF(GSAVE^GET("SCENE_CODE"),"_","SGZAJEZDNIASCENECODELAST","BFITMP1","BFITMP2");}


OBJECT=BEHGOTOMENUSLOTY
BEHGOTOMENUSLOTY:TYPE=BEHAVIOUR
BEHGOTOMENUSLOTY:CODE={BEHAMBIENTSNDSTOP^RUN();GSAVE^GSET("GAME_STATUS","MENU_SLOTY");SGSCENENAME^SET("MENUSLOTY");PRZYGODA^GOTO(SGSCENENAME);PPMENU^OPCJE_HIDE();PPMENU^OPCJE_DISABLE();CURSOR^SET("STD");}


OBJECT=BEHGOTOZAJEZDNIA
BEHGOTOZAJEZDNIA:TYPE=BEHAVIOUR
BEHGOTOZAJEZDNIA:CODE={BEHAMBIENTSNDSTOP^RUN();GSAVE^GSET("GAME_STATUS","ZAJEZDNIA");SGSCENENAME^SET("ZAJEZDNIA");PRZYGODA^GOTO(SGSCENENAME);PPMENU^OPCJE_HIDE();PPMENU^OPCJE_DISABLE();CURSOR^SET("STD");}


OBJECT=_______________
_______________:TYPE=BEHAVIOUR
_______________:CODE={}


OBJECT=BEHMUSICSET
BEHMUSICSET:TYPE=BEHAVIOUR
BEHMUSICSET:CODE={*SGSCENENAME^STARTMUSIC([$1+".WAV"]);IGMUSICVOLUME^SET(IGMUSICVOLUME);}


OBJECT=BEHMUSICPLAY
BEHMUSICPLAY:TYPE=BEHAVIOUR
BEHMUSICPLAY:CODE={*SGSCENENAME^STARTMUSIC();IGMUSICVOLUME^SET(IGMUSICVOLUME);}


OBJECT=BEHMUSICSTOP
BEHMUSICSTOP:TYPE=BEHAVIOUR
BEHMUSICSTOP:CODE={TMUSICSTOP^ENABLE();}


OBJECT=BEHAMBIENTSNDPLAY
BEHAMBIENTSNDPLAY:TYPE=BEHAVIOUR
BEHAMBIENTSNDPLAY:CODE={@STRING("STMPASPAMBNAME",$1);@IF("SGAMBIENTSNDNAME","!_","STMPASPAMBNAME","BFITMP3","");SNDGAMBIENTSND^PLAY();}


OBJECT=BEHAMBIENTSNDSTOP
BEHAMBIENTSNDSTOP:TYPE=BEHAVIOUR
BEHAMBIENTSNDSTOP:CODE={SNDGAMBIENTSND^STOP(FALSE);}


OBJECT=BEHSFXPLAY
BEHSFXPLAY:TYPE=BEHAVIOUR
BEHSFXPLAY:CODE={@STRING("STMPSPSFXNAME",$1);@INT("ITMPSPFREENO",ARRFREESFX^FIND(""));@IF("ITMPSPFREENO",">","-1","BFITMP4","");}


OBJECT=BEHSFXSTOP
BEHSFXSTOP:TYPE=BEHAVIOUR
BEHSFXSTOP:CODE={SNDGSFX0^STOP(TRUE);SNDGSFX1^STOP(TRUE);SNDGSFX2^STOP(TRUE);SNDGSFX3^STOP(TRUE);SNDGSFX4^STOP(TRUE);}


OBJECT=_______________
_______________:TYPE=BEHAVIOUR
_______________:CODE={}


OBJECT=BEHGNULL
BEHGNULL:TYPE=BEHAVIOUR
BEHGNULL:CODE={}


OBJECT=BFITMP0
BFITMP0:TYPE=BEHAVIOUR
BFITMP0:CODE={KEYBOARD^ENABLE();}


OBJECT=BFITMP1
BFITMP1:TYPE=BEHAVIOUR
BFITMP1:CODE={BEHGOTOZAJEZDNIA^RUN();}


OBJECT=BFITMP2
BFITMP2:TYPE=BEHAVIOUR
BFITMP2:CODE={BTNNULLFADE^ENABLE();BGKEYBOARDENABLED^SET(KEYBOARD^ISENABLED());KEYBOARD^DISABLE();PPMENU^OPCJE_DISABLE();ANNKEYBMOUSEHELP^PLAY("NULL");ANNFADE^PLAY("CLOSE");}


OBJECT=BFITMP3
BFITMP3:TYPE=BEHAVIOUR
BFITMP3:CODE={SGAMBIENTSNDNAME^SET(STMPASPAMBNAME);SNDGAMBIENTSND^LOAD(["$WAVS\"+SGAMBIENTSNDNAME+".WAV"]);}


OBJECT=BFITMP4
BFITMP4:TYPE=BEHAVIOUR
BFITMP4:CODE={@STRING("STMPSPSFXWAVE",["SNDGSFX"+ITMPSPFREENO]);*STMPSPSFXWAVE^LOAD(["$WAVS\"+STMPSPSFXNAME+".WAV"]);ARRFREESFX^CHANGEAT(ITMPSPFREENO,STMPSPSFXNAME);*STMPSPSFXWAVE^PLAY();}


